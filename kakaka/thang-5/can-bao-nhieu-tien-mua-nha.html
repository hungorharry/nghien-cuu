<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MÃ¡y TÃ­nh Äáº§u TÆ° Chung CÆ° & TÃ i ChÃ­nh CÃ¡ NhÃ¢n</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation/dist/chartjs-plugin-annotation.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh; padding: 20px; color: #333;
        }
        .container {
            max-width: 1200px; margin: 0 auto; background: rgba(255, 255, 255, 0.95);
            border-radius: 20px; box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px); overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24); color: white;
            padding: 30px; text-align: center;
        }
        .header h1 { font-size: 2.5em; margin-bottom: 10px; text-shadow: 0 2px 4px rgba(0,0,0,0.3); }
        .calculator-section { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; padding: 30px; }
        .input-card { background: white; border-radius: 15px; padding: 25px; box-shadow: 0 8px 25px rgba(0,0,0,0.1); }
        .input-group { margin-bottom: 20px; }
        .input-group label { display: block; margin-bottom: 8px; font-weight: bold; color: #333; font-size: 1.1em; }
        .input-group input, .input-group select {
            width: 100%; padding: 12px; border: 2px solid #e1e8ed;
            border-radius: 8px; font-size: 1.1em; transition: border-color 0.3s ease;
        }
        .input-group select optgroup { font-weight: bold; color: #333; background: #f8f9fa; }
        .input-group select option { padding: 8px 12px; color: #666; }
        .input-group input:focus, .input-group select:focus {
            outline: none; border-color: #ff6b6b; box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.1);
        }
        .currency { position: relative; }
        .currency::after {
            content: 'triá»‡u VNÄ'; position: absolute; right: 12px; top: 50%;
            transform: translateY(-50%); color: #666; font-size: 0.9em; pointer-events: none;
        }
        .currency input { padding-right: 90px; }
        .results-card {
            background: linear-gradient(135deg, #74b9ff, #0984e3); color: white;
            border-radius: 15px; padding: 25px;
        }
        .result-item {
            background: rgba(255,255,255,0.1); border-radius: 10px; padding: 15px;
            margin-bottom: 15px; backdrop-filter: blur(5px);
        }
        .result-label { font-size: 0.9em; opacity: 0.8; margin-bottom: 5px; }
        .result-value { font-size: 1.4em; font-weight: bold; }
        
        .selected-project-info {
            grid-column: 1 / -1; 
            margin-top: 20px; padding: 20px; background: #f0f4f8; 
            border-radius: 15px; box-shadow: 0 8px 25px rgba(0,0,0,0.05);
            border-left: 5px solid #ff6b6b; 
        }
        .selected-project-info h3 { color: #ff6b6b; margin-bottom: 15px; text-align:center; font-size: 1.5em; }
        .selected-project-info div { font-size: 1.05em; margin-bottom: 8px; color: #34495e;}
        #selectedProjectName { font-size: 1.3em; font-weight: bold; margin-bottom: 10px; color: #2c3e50; }
        .star-rating { color: #f39c12; font-size: 1.2em; }
        .star-rating .far { color: #bdc3c7; }
        #selectedProjectContractorPast ul { list-style-type: disc; margin-left: 20px; padding-left: 5px;}
        #selectedProjectContractorPast li { margin-bottom: 3px;}

        .market-info {
            grid-column: 1 / -1; 
            background: linear-gradient(135deg, #fdcb6e, #e17055); 
            color: white; padding: 20px; border-radius: 15px; margin-top: 20px;
        }
        .market-info h3 { text-align: center; margin-bottom: 15px; font-size: 1.4em; }
        .market-segments { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; }
        .segment-card { background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; }
        .segment-title { font-weight: bold; margin-bottom: 8px; font-size: 1.1em; }
        .segment-info { font-size: 0.9em; line-height: 1.4; }

        .timeline-section {
            grid-column: 1 / -1; background: linear-gradient(135deg, #00b894, #00cec9); color: white;
            border-radius: 15px; padding: 30px; margin-top: 20px;
        }
        .timeline-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; margin-top: 20px; }
        .timeline-item {
            background: rgba(255,255,255,0.15); padding: 20px; border-radius: 12px; text-align: center;
            backdrop-filter: blur(5px); border: 1px solid rgba(255,255,255,0.2); transition: transform 0.3s ease;
        }
        .timeline-item:hover { transform: translateY(-3px); background: rgba(255,255,255,0.2); }
        .timeline-year { font-size: 1.2em; font-weight: bold; color: #ffeaa7; margin-bottom: 10px; }
        .timeline-amount { font-size: 1.5em; font-weight: bold; margin-bottom: 5px; }
        .timeline-desc { font-size: 0.85em; opacity: 0.9; line-height: 1.5; }
        .charts-section {
            grid-column: 1 / -1; background: white; border-radius: 15px; padding: 40px;
            margin-top: 20px; box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        .charts-section h2 { text-align: center; margin-bottom: 20px; color: #333; font-size: 1.6em; }
        .chart-container { position: relative; height: 350px; width: 100%; margin-bottom: 30px; }
        .chart-container:last-child { margin-bottom: 0; }
        .house-options {
            grid-column: 1 / -1; display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px; margin-top: 20px;
        }
        .house-options h3.category-header { 
            display: flex; align-items: center; font-weight: bold; 
            text-transform: uppercase; letter-spacing: 1px; 
            grid-column: 1 / -1; 
        }
        .filter-btn { transition: all 0.3s ease; font-family: inherit; }
        .filter-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
        .filter-btn.active { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.2); }
        .house-card {
            background: white; border-radius: 15px; padding: 25px; box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, border 0.3s ease; cursor: pointer; border: 3px solid transparent;
        }
        .house-card:hover { transform: translateY(-5px); }
        .house-card.selected-for-chart { border-color: #ff6b6b !important; box-shadow: 0 12px 30px rgba(255, 107, 107, 0.3); }
        .house-card.affordable { border-left: 5px solid #00b894; }
        .house-card.stretch { border-left: 5px solid #fdcb6e; }
        .house-card.future { border-left: 5px solid #ff6b6b; }
        .house-card.house-luxury { border-left: 5px solid #6c5ce7 !important; }
        .house-card.selected-for-chart {
            border-left-width: 3px !important; border-top-width: 3px !important;
            border-right-width: 3px !important; border-bottom-width: 3px !important;
        }
        .house-title { font-size: 1.3em; font-weight: bold; margin-bottom: 10px; color: #333; }
        .house-price { font-size: 1.1em; color: #ff6b6b; font-weight: bold; margin-bottom: 10px; }
        .house-details { font-size: 0.9em; color: #666; line-height: 1.4; }
        .price-projection { font-size: 0.85em; color: #666; margin-top: 8px; font-style: italic; }
        .status-badge {
            display: inline-block; padding: 4px 8px; border-radius: 12px; font-size: 0.8em;
            font-weight: bold; text-transform: uppercase; margin-top: 10px;
        }
        .status-green { background: #00b894; color: white; }
        .status-orange { background: #fdcb6e; color: #333; }
        .status-red { background: #ff6b6b; color: white; }
        .status-luxury-custom { background: #6c5ce7; color: white; }

        .guide-section {
            grid-column: 1 / -1; background: linear-gradient(135deg, #a8e6cf, #dcedc1); 
            border-radius: 15px; padding: 25px; margin-top: 20px;
            border: 2px solid #81c784;
        }
        .guide-toggle {
            background: linear-gradient(135deg, #4caf50, #388e3c); color: white; 
            border: none; padding: 12px 24px; border-radius: 25px; 
            font-size: 1.1em; font-weight: bold; cursor: pointer;
            transition: all 0.3s ease; margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
        }
        .guide-toggle:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4); }
        .guide-content { display: none; }
        .guide-content.active { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .guide-step { 
            background: rgba(255, 255, 255, 0.8); border-radius: 10px; 
            padding: 20px; margin-bottom: 15px; border-left: 4px solid #4caf50;
        }
        .guide-step h4 { color: #2e7d32; margin-bottom: 10px; font-size: 1.2em; }
        .guide-step ul { margin-left: 20px; }
        .guide-step li { margin-bottom: 8px; line-height: 1.5; }
        .guide-highlight { background: linear-gradient(135deg, #fff3e0, #ffe0b2); 
                          border: 2px solid #ff9800; border-radius: 8px; 
                          padding: 15px; margin: 15px 0; }
        .guide-tip { background: #e8f5e8; border-left: 4px solid #4caf50; 
                    padding: 12px; margin: 10px 0; border-radius: 5px; }
        .guide-warning { background: #fff3e0; border-left: 4px solid #ff9800; 
                        padding: 12px; margin: 10px 0; border-radius: 5px; }

        @media (max-width: 768px) {
            .calculator-section { grid-template-columns: 1fr; }
            .header h1 { font-size: 2em; }
            .timeline-grid { grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; }
            .timeline-item { padding: 15px; }
            .timeline-year { font-size: 1.1em; margin-bottom: 8px; }
            .timeline-amount { font-size: 1.2em; }
            .chart-container { height: 300px; }
            .market-segments { grid-template-columns: 1fr; }
            .guide-step { padding: 15px; }
            .guide-step h4 { font-size: 1.1em; }
            .guide-toggle { font-size: 1em; padding: 10px 20px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><span style="font-size: 0.8em;">ğŸ¢</span> MÃ¡y TÃ­nh Äáº§u TÆ° Chung CÆ° & TÃ i ChÃ­nh CÃ¡ NhÃ¢n</h1>
            <p>TÃ­nh toÃ¡n kháº£ nÄƒng mua chung cÆ° vá»›i thu nháº­p cá»§a báº¡n (Táº§m nhÃ¬n 2034) - <strong>Logic tÄƒng giÃ¡ thá»±c táº¿ theo phÃ¢n khÃºc</strong></p>
        </div>
        
        <div class="calculator-section">
            <div class="input-card">
                <h2 style="margin-bottom: 20px; color: #ff6b6b;">ğŸ“Š ThÃ´ng Tin Thu Nháº­p & Chi TiÃªu</h2>
                <div class="input-group"> <label for="salary">LÆ°Æ¡ng hÃ ng thÃ¡ng:</label> <div class="currency"><input type="number" id="salary" value="10" min="1" max="1000"></div> </div>
                <div class="input-group"> <label for="expenses">Chi tiÃªu hÃ ng thÃ¡ng (hiá»‡n táº¡i):</label> <div class="currency"><input type="number" id="expenses" value="4" min="1" max="500"></div> </div>
                <div class="input-group"> <label for="bonus">Thu nháº­p phá»¥ (nÄƒm):</label> <div class="currency"><input type="number" id="bonus" value="20" min="0" max="1000"></div> </div>
                <div class="input-group"> <label for="current-savings">Tiáº¿t kiá»‡m tiá»n máº·t hiá»‡n táº¡i:</label> <div class="currency"><input type="number" id="current-savings" value="0" min="0" max="10000"></div> </div>
                <div class="input-group"> <label for="initial-investment">GiÃ¡ trá»‹ Ä‘áº§u tÆ° hiá»‡n táº¡i:</label> <div class="currency"><input type="number" id="initial-investment" value="0" min="0" max="10000"></div> </div>
                <div class="input-group"> <label for="dca-amount">Äáº§u tÆ° DCA hÃ ng thÃ¡ng:</label> <div class="currency"><input type="number" id="dca-amount" value="0" min="0" max="500"></div> </div>
                
                <div class="input-group"> <label for="target-years">Thá»i gian má»¥c tiÃªu:</label> <select id="target-years"> <optgroup label="ğŸš€ Ngáº¯n háº¡n"><option value="0.5">6 thÃ¡ng</option><option value="1">1 nÄƒm</option><option value="1.5">1.5 nÄƒm</option><option value="2">2 nÄƒm</option></optgroup> <optgroup label="ğŸ¯ Trung háº¡n"><option value="2.5">2.5 nÄƒm</option><option value="3" selected>3 nÄƒm</option><option value="3.5">3.5 nÄƒm</option><option value="4">4 nÄƒm</option><option value="4.5">4.5 nÄƒm</option><option value="5">5 nÄƒm</option></optgroup> <optgroup label="ğŸƒ DÃ i háº¡n"><option value="6">6 nÄƒm</option><option value="7">7 nÄƒm</option><option value="8">8 nÄƒm</option><option value="10">10 nÄƒm</option></optgroup> <optgroup label="ğŸ† Ráº¥t dÃ i háº¡n (Äáº¿n 2034+)"><option value="12">12 nÄƒm</option><option value="15">15 nÄƒm</option><option value="20">20 nÄƒm</option></optgroup> </select> </div>
                
                <h3 style="margin-top: 25px; margin-bottom: 15px; color: #555; font-size: 1.3em;">ğŸ“ˆ Tá»· Lá»‡ TÄƒng TrÆ°á»Ÿng HÃ ng NÄƒm</h3>
                <div class="input-group"> <label for="salary-growth">TÄƒng trÆ°á»Ÿng lÆ°Æ¡ng/nÄƒm (%):</label> <input type="number" id="salary-growth" value="5" min="0" max="20" step="0.5"> </div>
                <div class="input-group"> <label for="expenses-growth">Gia tÄƒng chi tiÃªu/nÄƒm (%):</label> <input type="number" id="expenses-growth" value="3" min="0" max="20" step="0.5"> </div>
                <div class="input-group"> <label for="investment-growth">TÄƒng trÆ°á»Ÿng Ä‘áº§u tÆ°/nÄƒm (%):</label> <input type="number" id="investment-growth" value="10" min="-20" max="50" step="0.5"> </div>
                <div style="background: linear-gradient(135deg, #ddd6fe, #c7d2fe); padding: 15px; border-radius: 10px; margin-top: 15px; font-size: 0.95em; color: #374151;">
                    <strong>ğŸ’¡ Tá»· lá»‡ tÄƒng giÃ¡ BÄS:</strong> ÄÆ°á»£c cá»‘ Ä‘á»‹nh 7%/nÄƒm cÆ¡ báº£n, tá»± Ä‘á»™ng Ä‘iá»u chá»‰nh theo phÃ¢n khÃºc vÃ  thá»i gian Ä‘á»ƒ pháº£n Ã¡nh thá»±c táº¿ thá»‹ trÆ°á»ng TP.HCM.
                </div>
            </div>
            
            <div class="results-card">
                <h2 style="margin-bottom: 20px;">ğŸ’° Káº¿t Quáº£ TÃ­nh ToÃ¡n</h2>
                <div class="result-item"><div class="result-label">Tiáº¿t kiá»‡m rÃ²ng hÃ ng thÃ¡ng (sau DCA):</div><div class="result-value" id="monthly-net-savings">...</div></div>
                <div class="result-item"><div class="result-label">Tá»•ng tÃ­ch lÅ©y sau <span id="years-display">3 nÄƒm</span> (Vá»‘n tá»± cÃ³):</div><div class="result-value" id="total-savings">...</div></div>
                <div class="result-item"><div class="result-label">GiÃ¡ trá»‹ danh má»¥c Ä‘áº§u tÆ° (cuá»‘i ká»³):</div><div class="result-value" id="final-investment-value">...</div></div>
                <div class="result-item"><div class="result-label">Kháº£ nÄƒng vay ngÃ¢n hÃ ng (Æ°á»›c tÃ­nh 70% giÃ¡ trá»‹ nhÃ ):</div><div class="result-value" id="loan-amount">...</div></div>
                <div class="result-item"><div class="result-label">Tá»•ng giÃ¡ trá»‹ chung cÆ° cÃ³ thá»ƒ mua (sau <span id="years-display-3">3 nÄƒm</span>):</div><div class="result-value" id="house-budget">...</div></div>
                <div class="result-item"><div class="result-label">Tá»· lá»‡ tiáº¿t kiá»‡m (so vá»›i lÆ°Æ¡ng, trÆ°á»›c DCA):</div><div class="result-value" id="savings-rate">...</div></div>
                <div class="result-item"><div class="result-label">âš ï¸ GiÃ¡ chung cÆ° 1.5 tá»· hÃ´m nay sau <span id="years-display-2">3 nÄƒm</span> (tÄƒng theo mÃ´ hÃ¬nh thá»±c táº¿):</div><div class="result-value" id="future-house-price">...</div></div>
                <div class="result-item"><div class="result-label">ğŸ¢ Sá»‘ dá»± Ã¡n chung cÆ° cÃ³ thá»ƒ mua (trong 57):</div><div class="result-value" id="affordable-count">...</div></div>
                <div class="result-item"><div class="result-label">ğŸ¯ Khuyáº¿n nghá»‹ cho báº¡n:</div><div class="result-value" id="recommendation" style="font-size: 1em; line-height: 1.4;">...</div></div>
                <div class="result-item"> <div class="result-label">ğŸ“Š Tiáº¿n Ä‘á»™ Ä‘áº¿n chung cÆ° kháº£ thi Ä‘áº§u tiÃªn (tráº£ trÆ°á»›c):</div> <div style="background: rgba(255,255,255,0.2); border-radius: 10px; height: 20px; margin: 10px 0; overflow: hidden;"> <div id="progress-bar" style="height: 100%; background: linear-gradient(90deg, #00b894, #00cec9); border-radius: 10px; transition: width 0.5s ease; width: 0%;"></div> </div> <div class="result-value" id="progress-text" style="font-size: 0.9em;">...</div> </div>
            </div>
            
            <div class="guide-section">
                <button class="guide-toggle" onclick="toggleGuide()">
                    ğŸ“š HÆ°á»›ng Dáº«n Sá»­ Dá»¥ng Chi Tiáº¿t
                </button>
                
                <div class="guide-content" id="guideContent">
                    <div class="guide-highlight">
                        <h3 style="color: #e65100; margin-bottom: 15px;">ğŸ¯ Má»¥c ÄÃ­ch cá»§a MÃ¡y TÃ­nh</h3>
                        <p>GiÃºp báº¡n láº­p káº¿ hoáº¡ch tÃ i chÃ­nh thá»±c táº¿ Ä‘á»ƒ mua chung cÆ° táº¡i TP.HCM vÃ  vÃ¹ng phá»¥ cáº­n. MÃ¡y tÃ­nh sá»­ dá»¥ng <strong>mÃ´ hÃ¬nh tÄƒng giÃ¡ BÄS thá»±c táº¿</strong> - phÃ¢n khÃºc khÃ¡c nhau cÃ³ tá»‘c Ä‘á»™ tÄƒng giÃ¡ khÃ¡c nhau!</p>
                    </div>

                    <div class="guide-step">
                        <h4>ğŸ”¢ BÆ°á»›c 1: Nháº­p ThÃ´ng Tin Thu Nháº­p & Chi TiÃªu</h4>
                        <ul>
                            <li><strong>LÆ°Æ¡ng hÃ ng thÃ¡ng:</strong> Thu nháº­p chÃ­nh tá»« cÃ´ng viá»‡c (triá»‡u VNÄ)</li>
                            <li><strong>Chi tiÃªu hÃ ng thÃ¡ng:</strong> Tá»•ng chi phÃ­ sinh hoáº¡t, Äƒn uá»‘ng, di chuyá»ƒn hiá»‡n táº¡i</li>
                            <li><strong>Thu nháº­p phá»¥ (nÄƒm):</strong> ThÆ°á»Ÿng Táº¿t, lÃ m thÃªm, freelance...</li>
                            <li><strong>Tiáº¿t kiá»‡m tiá»n máº·t hiá»‡n táº¡i:</strong> Sá»‘ tiá»n cÃ³ sáºµn trong tÃ i khoáº£n</li>
                            <li><strong>GiÃ¡ trá»‹ Ä‘áº§u tÆ° hiá»‡n táº¡i:</strong> Cá»• phiáº¿u, quá»¹, vÃ ng, crypto Ä‘ang sá»Ÿ há»¯u</li>
                            <li><strong>Äáº§u tÆ° DCA hÃ ng thÃ¡ng:</strong> Sá»‘ tiá»n Ä‘á»‹nh ká»³ bá» vÃ o Ä‘áº§u tÆ° (Dollar Cost Averaging)</li>
                        </ul>
                        <div class="guide-tip">
                            ğŸ’¡ <strong>Máº¹o:</strong> HÃ£y Æ°á»›c tÃ­nh tháº­t vÃ  hÆ¡i bi quan má»™t chÃºt Ä‘á»ƒ káº¿ hoáº¡ch thá»±c táº¿ hÆ¡n!
                        </div>
                    </div>

                    <div class="guide-step">
                        <h4>â° BÆ°á»›c 2: Chá»n Thá»i Gian Má»¥c TiÃªu</h4>
                        <ul>
                            <li><strong>Ngáº¯n háº¡n (6 thÃ¡ng - 2 nÄƒm):</strong> PhÃ¹ há»£p náº¿u Ä‘Ã£ cÃ³ vá»‘n, cáº§n thá»i gian chuáº©n bá»‹</li>
                            <li><strong>Trung háº¡n (2.5 - 5 nÄƒm):</strong> Lá»±a chá»n phá»• biáº¿n, cÃ¢n báº±ng giá»¯a tÃ­ch lÅ©y vÃ  tÄƒng giÃ¡</li>
                            <li><strong>DÃ i háº¡n (6+ nÄƒm):</strong> Cho ngÆ°á»i tráº», cÃ³ thá»i gian tÃ­ch lÅ©y tá»« tá»«</li>
                        </ul>
                        <div class="guide-warning">
                            âš ï¸ <strong>LÆ°u Ã½:</strong> Thá»i gian cÃ ng dÃ i, giÃ¡ chung cÆ° cÃ ng tÄƒng nhiá»u!
                        </div>
                    </div>

                    <div class="guide-step">
                        <h4>ğŸ“ˆ BÆ°á»›c 3: Äiá»u Chá»‰nh Tá»· Lá»‡ TÄƒng TrÆ°á»Ÿng</h4>
                        <ul>
                            <li><strong>TÄƒng trÆ°á»Ÿng lÆ°Æ¡ng:</strong> 3-7%/nÄƒm lÃ  há»£p lÃ½ (tÃ¹y ngÃ nh nghá»)</li>
                            <li><strong>Gia tÄƒng chi tiÃªu:</strong> 2-4%/nÄƒm (láº¡m phÃ¡t + nÃ¢ng cáº¥p Ä‘á»i sá»‘ng)</li>
                            <li><strong>TÄƒng trÆ°á»Ÿng Ä‘áº§u tÆ°:</strong> 8-12%/nÄƒm (cá»• phiáº¿u), 5-7%/nÄƒm (quá»¹ an toÃ n)</li>
                        </ul>
                        <div class="guide-tip">
                            ğŸ’¡ <strong>Máº¹o:</strong> Tá»· lá»‡ tÄƒng giÃ¡ BÄS Ä‘Ã£ Ä‘Æ°á»£c cá»‘ Ä‘á»‹nh theo nghiÃªn cá»©u thá»‹ trÆ°á»ng thá»±c táº¿!
                        </div>
                    </div>

                    <div class="guide-step">
                        <h4>ğŸ“Š BÆ°á»›c 4: Äá»c Hiá»ƒu Káº¿t Quáº£</h4>
                        <ul>
                            <li><strong>Tiáº¿t kiá»‡m rÃ²ng hÃ ng thÃ¡ng:</strong> Sá»‘ tiá»n cÃ³ thá»ƒ tÃ­ch lÅ©y má»—i thÃ¡ng sau khi trá»« DCA</li>
                            <li><strong>Tá»•ng tÃ­ch lÅ©y:</strong> Tá»•ng tÃ i sáº£n (tiá»n máº·t + Ä‘áº§u tÆ°) sau thá»i gian má»¥c tiÃªu</li>
                            <li><strong>Kháº£ nÄƒng vay:</strong> Æ¯á»›c tÃ­nh vay 70% giÃ¡ trá»‹ nhÃ </li>
                            <li><strong>Tá»•ng giÃ¡ trá»‹ chung cÆ° cÃ³ thá»ƒ mua:</strong> Vá»‘n tá»± cÃ³ + Kháº£ nÄƒng vay</li>
                            <li><strong>Sá»‘ dá»± Ã¡n cÃ³ thá»ƒ mua:</strong> Trong tá»•ng sá»‘ 57 dá»± Ã¡n Ä‘Ã£ kháº£o sÃ¡t</li>
                        </ul>
                    </div>

                    <div class="guide-step">
                        <h4>ğŸ¢ BÆ°á»›c 5: KhÃ¡m PhÃ¡ CÃ¡c Dá»± Ãn Chung CÆ°</h4>
                        <ul>
                            <li><strong>ğŸ’š BÃ¬nh dÃ¢n (18 dá»± Ã¡n):</strong> DÆ°á»›i 1.8 tá»· - Nhiá»u táº¡i HÃ³c MÃ´n, BÃ¬nh ChÃ¡nh, Q12</li>
                            <li><strong>ğŸŸ¡ Trung cáº¥p (16 dá»± Ã¡n):</strong> 1.8-3.5 tá»· - PhÃ¢n khÃºc chÃ­nh, vá»‹ trÃ­ tá»‘t</li>
                            <li><strong>ğŸ”´ Cao cáº¥p (13 dá»± Ã¡n):</strong> 3.2-6 tá»· - Thá»§ ThiÃªm, Q1, Q2...</li>
                            <li><strong>ğŸ’ Luxury (11 dá»± Ã¡n):</strong> TrÃªn 6.5 tá»· - SiÃªu sang, branded residences</li>
                        </ul>
                        <div class="guide-tip">
                            ğŸ’¡ <strong>CÃ¡ch sá»­ dá»¥ng:</strong> Click vÃ o tá»«ng dá»± Ã¡n Ä‘á»ƒ xem chi tiáº¿t vÃ  hiá»ƒn thá»‹ trÃªn biá»ƒu Ä‘á»“!
                        </div>
                    </div>

                    <div class="guide-step">
                        <h4>ğŸ¨ BÆ°á»›c 6: PhÃ¢n TÃ­ch Biá»ƒu Äá»“</h4>
                        <ul>
                            <li><strong>Biá»ƒu Ä‘á»“ 1:</strong> Theo dÃµi tÄƒng trÆ°á»Ÿng lÆ°Æ¡ng vs chi tiÃªu vs tiáº¿t kiá»‡m</li>
                            <li><strong>Biá»ƒu Ä‘á»“ 2:</strong> Lá»™ trÃ¬nh tÃ­ch lÅ©y so vá»›i má»¥c tiÃªu mua nhÃ </li>
                            <li><strong>ÄÆ°á»ng giÃ¡ dá»± Ã¡n:</strong> Hiá»‡n khi click chá»n dá»± Ã¡n cá»¥ thá»ƒ</li>
                            <li><strong>VÃ¹ng giÃ¡:</strong> Min-Max price cá»§a dá»± Ã¡n theo thá»i gian</li>
                        </ul>
                    </div>

                    <div class="guide-step">
                        <h4>âš¡ MÃ´ HÃ¬nh TÄƒng GiÃ¡ BÄS Thá»±c Táº¿</h4>
                        <ul>
                            <li><strong>ğŸ’š BÃ¬nh dÃ¢n:</strong> TÄƒng nhanh nháº¥t (~10.5%/nÄƒm) - Khan hiáº¿m Ä‘áº¥t</li>
                            <li><strong>ğŸŸ¡ Trung cáº¥p:</strong> TÄƒng á»•n Ä‘á»‹nh (~8.4%/nÄƒm) - PhÃ¢n khÃºc chÃ­nh</li>
                            <li><strong>ğŸ”´ Cao cáº¥p:</strong> TÄƒng cháº­m hÆ¡n (~6.0%/nÄƒm) - Thá»‹ trÆ°á»ng nhá»</li>
                            <li><strong>ğŸ’ Luxury:</strong> TÄƒng cháº­m nháº¥t (~4.2%/nÄƒm) - Biáº¿n Ä‘á»™ng lá»›n</li>
                        </ul>
                        <div class="guide-warning">
                            âš ï¸ <strong>Quan trá»ng:</strong> Tá»· lá»‡ nÃ y giáº£m dáº§n theo thá»i gian (diminishing returns)
                        </div>
                    </div>

                    <div class="guide-highlight">
                        <h4 style="color: #e65100; margin-bottom: 15px;">ğŸ¯ Lá»i KhuyÃªn Äáº§u TÆ° ThÃ´ng Minh</h4>
                        <ul style="margin-left: 0; padding-left: 20px;">
                            <li><strong>TÄƒng thu nháº­p:</strong> Há»c thÃªm ká»¹ nÄƒng, chuyá»ƒn viá»‡c, lÃ m thÃªm</li>
                            <li><strong>Kiá»ƒm soÃ¡t chi tiÃªu:</strong> Láº­p budget, cáº¯t giáº£m chi phÃ­ khÃ´ng cáº§n thiáº¿t</li>
                            <li><strong>Äáº§u tÆ° DCA:</strong> Äáº§u tÆ° Ä‘á»‹nh ká»³ vÃ o ETF, cá»• phiáº¿u blue-chip</li>
                            <li><strong>Mua sá»›m hÆ¡n:</strong> GiÃ¡ BÄS tÄƒng liÃªn tá»¥c, cÃ ng chá» cÃ ng khÃ³</li>
                            <li><strong>Chá»n vá»‹ trÃ­:</strong> Æ¯u tiÃªn gáº§n giao thÃ´ng cÃ´ng cá»™ng, trÆ°á»ng há»c</li>
                            <li><strong>PhÃ¡p lÃ½:</strong> Kiá»ƒm tra ká»¹ sá»• Ä‘á», giáº¥y phÃ©p xÃ¢y dá»±ng</li>
                        </ul>
                    </div>

                    <div class="guide-tip" style="text-align: center; font-size: 1.1em;">
                        ğŸ¯ <strong>Má»¥c tiÃªu:</strong> GiÃºp báº¡n cÃ³ káº¿ hoáº¡ch tÃ i chÃ­nh thá»±c táº¿ Ä‘á»ƒ sá»Ÿ há»¯u ngÃ´i nhÃ  mÆ¡ Æ°á»›c! 
                        <br>ğŸ’ª <strong>HÃ nh Ä‘á»™ng:</strong> Báº¯t Ä‘áº§u tiáº¿t kiá»‡m vÃ  Ä‘áº§u tÆ° tá»« hÃ´m nay!
                    </div>
                </div>
            </div>

            <div class="market-info">
                <h3>ğŸ“ˆ MÃ´ HÃ¬nh TÄƒng GiÃ¡ Thá»±c Táº¿ Theo PhÃ¢n KhÃºc</h3>
                <div class="market-segments">
                    <div class="segment-card">
                        <div class="segment-title">ğŸ’š BÃ¬nh DÃ¢n</div>
                        <div class="segment-info" id="affordable-rate">TÄƒng <span id="affordable-growth">9.0</span>%/nÄƒm<br>LÃ½ do: Khan hiáº¿m Ä‘áº¥t, nhu cáº§u cao</div>
                    </div>
                    <div class="segment-card">
                        <div class="segment-title">ğŸŸ¡ Trung Cáº¥p</div>
                        <div class="segment-info" id="mid-rate">TÄƒng <span id="mid-growth">7.0</span>%/nÄƒm<br>LÃ½ do: PhÃ¢n khÃºc chÃ­nh, á»•n Ä‘á»‹nh</div>
                    </div>
                    <div class="segment-card">
                        <div class="segment-title">ğŸ”´ Cao Cáº¥p</div>
                        <div class="segment-info" id="high-rate">TÄƒng <span id="high-growth">5.0</span>%/nÄƒm<br>LÃ½ do: Thá»‹ trÆ°á»ng nhá» hÆ¡n</div>
                    </div>
                    <div class="segment-card">
                        <div class="segment-title">ğŸ’ Luxury</div>
                        <div class="segment-info" id="luxury-rate">TÄƒng <span id="luxury-growth">3.5</span>%/nÄƒm<br>LÃ½ do: Thá»‹ trÆ°á»ng ráº¥t nhá», biáº¿n Ä‘á»™ng</div>
                    </div>
                </div>
                <p style="text-align: center; margin-top: 15px; font-size: 0.9em; opacity: 0.9;">
                    * Tá»· lá»‡ tÄƒng giáº£m dáº§n theo thá»i gian Ä‘á»ƒ pháº£n Ã¡nh thá»±c táº¿ thá»‹ trÆ°á»ng
                </p>
            </div>
            
            <div class="selected-project-info" id="selectedProjectInfoCard" style="display: none;">
                <h3>ğŸ—ï¸ ThÃ´ng Tin Chung CÆ° Äang Chá»n</h3>
                <div id="selectedProjectName" style="font-size: 1.5em; color: #007bff; margin-bottom:15px;"></div>
                <div><strong>Chá»§ Ä‘áº§u tÆ°:</strong> <span id="selectedProjectDeveloper"></span></div>
                <div><strong>TÃ¬nh tráº¡ng:</strong> <span id="selectedProjectStatus"></span></div>
                <div><strong>Äáº·c Ä‘iá»ƒm ná»•i báº­t:</strong> <span id="selectedProjectFeatures"></span></div>
                <h4 style="margin-top: 20px; margin-bottom: 10px; color: #28a745;">ThÃ´ng Tin NhÃ  Tháº§u ChÃ­nh</h4>
                <div><strong>TÃªn nhÃ  tháº§u:</strong> <span id="selectedProjectContractorName"></span></div>
                <div><strong>ÄÃ¡nh giÃ¡ uy tÃ­n:</strong> <span id="selectedProjectContractorRating" class="star-rating"></span></div>
                <div style="margin-top: 5px;"><strong>Má»™t sá»‘ dá»± Ã¡n Ä‘Ã£ thá»±c hiá»‡n:</strong> <div id="selectedProjectContractorPast" style="margin-left: 20px; font-size:0.95em;"></div></div>
                <div style="margin-top: 5px;"><strong>Nháº­n xÃ©t chung:</strong> <span id="selectedProjectContractorFeedback" style="font-style: italic;"></span></div>
            </div>

            <div class="timeline-section">
                <h2 style="text-align: center; margin-bottom: 10px;">ğŸ“ˆ Lá»™ TrÃ¬nh TÃ­ch LÅ©y Mua Chung CÆ°</h2>
                <p style="text-align: center; opacity: 0.9;">Dá»± bÃ¡o sá»‘ tiá»n tÃ­ch lÅ©y Ä‘Æ°á»£c theo tá»«ng nÄƒm (Tiá»n máº·t + Äáº§u tÆ°)</p>
                <div id="quick-tip" style="background: linear-gradient(135deg, rgb(85, 163, 255), rgb(0, 61, 130)); color: white; padding: 15px; border-radius: 10px; margin: 15px 0px; font-size: 0.9em; line-height: 1.4;">...</div>
                <div class="timeline-grid" id="timeline-grid"></div>
            </div>

                <div class="charts-section">
                <h2 style="font-size: 1.8em;">ğŸ“Š Biá»ƒu Äá»“ PhÃ¢n TÃ­ch TÃ i ChÃ­nh</h2>
                <div class="chart-container"><h3 style="text-align:center; margin-bottom:10px; color: #555;">TÄƒng TrÆ°á»Ÿng LÆ°Æ¡ng, Chi TiÃªu & Tiáº¿t Kiá»‡m RÃ²ng ThÃ¡ng</h3><canvas id="salaryGrowthChart"></canvas></div>
                <div class="chart-container"><h3 style="text-align:center; margin-bottom:10px; color: #555;">Lá»™ TrÃ¬nh Äáº¡t Má»¥c TiÃªu Mua Chung CÆ° (Tá»•ng TÃ i Sáº£n)</h3><canvas id="savingsGoalChart"></canvas></div>
            </div>
            
            <div class="house-options">
                <h2 style="grid-column: 1 / -1; text-align: center; margin-bottom: 20px; color: #333; font-size: 1.8em;">ğŸ¢ 57 Dá»± Ãn Chung CÆ° Äa Dáº¡ng (Click Ä‘á»ƒ xem chi tiáº¿t & biá»ƒu Ä‘á»“)</h2>
                <div style="grid-column: 1 / -1; background: linear-gradient(135deg, #fdcb6e, #e17055); color: white; padding: 15px; border-radius: 10px; text-align: center; margin-bottom: 20px;"><strong>âš ï¸ LÆ¯U Ã:</strong> GiÃ¡ chung cÆ° tÄƒng theo mÃ´ hÃ¬nh thá»±c táº¿ - phÃ¢n khÃºc khÃ¡c nhau cÃ³ tá»‘c Ä‘á»™ tÄƒng khÃ¡c nhau!</div>
                <div style="grid-column: 1 / -1; display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; margin-bottom: 30px;">
                    <button class="filter-btn active" onclick="filterHouses('all')" style="padding: 8px 16px; border: none; border-radius: 20px; background: #74b9ff; color: white; cursor: pointer; font-weight: bold;">Táº¥t cáº£ (57)</button>
                    <button class="filter-btn" onclick="filterHouses('affordable')" style="padding: 8px 16px; border: none; border-radius: 20px; background: #00b894; color: white; cursor: pointer;">BÃ¬nh dÃ¢n (18)</button>
                    <button class="filter-btn" onclick="filterHouses('mid')" style="padding: 8px 16px; border: none; border-radius: 20px; background: #fdcb6e; color: #333; cursor: pointer;">Trung cáº¥p (16)</button>
                    <button class="filter-btn" onclick="filterHouses('high')" style="padding: 8px 16px; border: none; border-radius: 20px; background: #ff6b6b; color: white; cursor: pointer;">Cao cáº¥p (13)</button>
                    <button class="filter-btn" onclick="filterHouses('luxury')" style="padding: 8px 16px; border: none; border-radius: 20px; background: #6c5ce7; color: white; cursor: pointer;">Luxury (11)</button>
                </div>
                <h3 class="category-header affordable-category" style="color: #00b894; font-size: 1.4em; margin: 20px 0 10px 0; border-bottom: 2px solid #00b894; padding-bottom: 10px;">ğŸ’š CHUNG CÆ¯ BÃŒNH DÃ‚N (DÆ°á»›i 1.8 tá»·)</h3>
                <h3 class="category-header mid-category" style="color: #fdcb6e; font-size: 1.4em; margin: 30px 0 10px 0; border-bottom: 2px solid #fdcb6e; padding-bottom: 10px;">ğŸŸ¡ CHUNG CÆ¯ TRUNG Cáº¤P (1.8 - 3.5 tá»·)</h3>
                <h3 class="category-header high-category" style="color: #ff6b6b; font-size: 1.4em; margin: 30px 0 10px 0; border-bottom: 2px solid #ff6b6b; padding-bottom: 10px;">ğŸ”´ CHUNG CÆ¯ CAO Cáº¤P (3.2 - 6 tá»·)</h3>
                <h3 class="category-header luxury-category" style="color: #6c5ce7; font-size: 1.4em; margin: 30px 0 10px 0; border-bottom: 2px solid #6c5ce7; padding-bottom: 10px;">ğŸ’ CHUNG CÆ¯ LUXURY (TrÃªn 6.5 tá»·)</h3>
            </div>
        </div>
    </div>

    <script>
        const PROJECTS_DATA = [
            // Dá»± Ã¡n bÃ¬nh dÃ¢n
            { id: 1, name: 'Chung CÆ° BÃ¬nh An (B.DÆ°Æ¡ng)', minPrice: 800, maxPrice: 1200, downPaymentRate: 0.2, segment: 'affordable', developer: 'Váº¡n XuÃ¢n Group (VÃ­ dá»¥)', contractor: 'XÃ¢y Dá»±ng ABC', contractorRating: 3, status: 'Äang má»Ÿ bÃ¡n', keyFeatures: 'Tiá»‡n Ã­ch cÆ¡ báº£n, gáº§n KCN.', contractorInfo: { name: 'XÃ¢y Dá»±ng ABC', rating: 3, pastProjects: ['KDC XYZ'], feedbackSummary: 'Cháº¥t lÆ°á»£ng khÃ¡.'}},
            { id: 2, name: 'Chung CÆ° Harmony (L.BÃ¬nh)', minPrice: 1200, maxPrice: 1600, downPaymentRate: 0.2, segment: 'affordable', developer: 'Nam Long Group (VÃ­ dá»¥)', contractor: 'An Gia Land Construction', contractorRating: 4, status: 'ÄÃ£ bÃ n giao má»™t pháº§n', keyFeatures: 'KhÃ´ng gian xanh, gáº§n trÆ°á»ng há»c.', contractorInfo: { name: 'An Gia Land Construction', rating: 4, pastProjects: ['Flora Kikyo'], feedbackSummary: 'Uy tÃ­n, cháº¥t lÆ°á»£ng tá»‘t.'}},
            { id: 3, name: 'Chung CÆ° Riverview (N.Tráº¡ch)', minPrice: 900, maxPrice: 1400, downPaymentRate: 0.2, segment: 'affordable', developer: 'Äá»‹a á»c HoÃ ng QuÃ¢n (VÃ­ dá»¥)', contractor: 'Äá»‹a á»c HoÃ ng QuÃ¢n (Tá»± xÃ¢y)', contractorRating: 3, status: 'Äang xÃ¢y dá»±ng', keyFeatures: 'GiÃ¡ cáº¡nh tranh, tiá»m nÄƒng khu vá»±c.', contractorInfo: { name: 'Äá»‹a á»c HoÃ ng QuÃ¢n', rating: 3, pastProjects: ['HQC Plaza'], feedbackSummary: 'Kinh nghiá»‡m NOXH.'}},
            { id: 4, name: 'Citi Esto (CÃ¡t LÃ¡i)', minPrice: 1500, maxPrice: 1750, downPaymentRate: 0.3, segment: 'affordable', developer: 'Kiáº¿n Ã', contractor: 'COSACO', contractorRating: 3, status: 'ÄÃ£ bÃ n giao', keyFeatures: 'KÄT CÃ¡t LÃ¡i, giÃ¡ tá»‘t.', contractorInfo: { name: 'COSACO', rating: 3, pastProjects:['Nhiá»u dá»± Ã¡n Kiáº¿n Ã'], feedbackSummary: 'Kinh nghiá»‡m vá»›i phÃ¢n khÃºc táº§m trung.'}},
            { id: 5, name: 'Ehome Southgate (Long An)', minPrice: 1000, maxPrice: 1300, downPaymentRate: 0.2, segment: 'affordable', developer: 'Nam Long Group', contractor: 'Nam Khang', contractorRating: 3, status: 'Äang bÃ n giao', keyFeatures: 'Thuá»™c KÄT Waterpoint, giÃ¡ dá»… chá»‹u.', contractorInfo: { name: 'Nam Khang', rating: 3, pastProjects:['Ehome 3, 4'], feedbackSummary: 'ChuyÃªn dÃ²ng Ehome.'}},
            { id: 6, name: 'Tecco Town BÃ¬nh TÃ¢n', minPrice: 1400, maxPrice: 1700, downPaymentRate: 0.2, segment: 'affordable', developer: 'Tecco Group', contractor: 'Tecco (Tá»± xÃ¢y)', contractorRating: 3, status: 'ÄÃ£ bÃ n giao', keyFeatures: 'Nhiá»u block, quy mÃ´ lá»›n.', contractorInfo: { name: 'Tecco Group', rating: 3, pastProjects:['Nhiá»u dá»± Ã¡n Tecco'], feedbackSummary: 'GiÃ¡ ráº», cháº¥t lÆ°á»£ng tÆ°Æ¡ng Ä‘á»‘i.'}},
            { id: 7, name: 'Dream Home Riverside (Q8)', minPrice: 1600, maxPrice: 1900, downPaymentRate: 0.3, segment: 'affordable', developer: 'NhÃ  MÆ¡', contractor: 'An Phong (GÄ1)', contractorRating: 4, status: 'ÄÃ£ bÃ n giao', keyFeatures: 'View sÃ´ng, tiá»‡n Ã­ch khÃ¡.', contractorInfo: { name: 'An Phong', rating: 4, pastProjects:['Nhiá»u dá»± Ã¡n lá»›n'], feedbackSummary: 'NhÃ  tháº§u tá»‘t.'}},
            { id: 8, name: 'Legacy Prime (Thuáº­n An, BD)', minPrice: 900, maxPrice: 1100, downPaymentRate: 0.2, segment: 'affordable', developer: 'Kim Oanh Group', contractor: 'HÃ²a BÃ¬nh Corp', contractorRating: 5, status: 'Äang xÃ¢y', keyFeatures: 'GiÃ¡ ráº» nháº¥t BÃ¬nh DÆ°Æ¡ng hiá»‡n táº¡i.', contractorInfo: { name: 'HÃ²a BÃ¬nh Corp', rating: 5, pastProjects:['Saigon Centre'], feedbackSummary: 'ThÆ°Æ¡ng hiá»‡u lá»›n.'}},
            { id: 9, name: 'Bcons Plaza (DÄ© An, BD)', minPrice: 1300, maxPrice: 1500, downPaymentRate: 0.2, segment: 'affordable', developer: 'Bcons', contractor: 'Bcons (Tá»± xÃ¢y)', contractorRating: 3, status: 'ÄÃ£ bÃ n giao', keyFeatures: 'GiÃ¡ tá»‘t, gáº§n LÃ ng ÄHQG.', contractorInfo: { name: 'Bcons', rating: 3, pastProjects:['DÃ²ng Bcons'], feedbackSummary: 'Nhanh, gá»n, giÃ¡ ráº».'}},
            { id: 10, name: 'PhÃº ÄÃ´ng Sky Garden (DÄ© An, BD)', minPrice: 1700, maxPrice: 2000, downPaymentRate: 0.3, segment: 'affordable', developer: 'PhÃº ÄÃ´ng Group', contractor: 'PhÃº ÄÃ´ng (Tá»± xÃ¢y)', contractorRating: 4, status: 'Sáº¯p bÃ n giao', keyFeatures: 'Cháº¥t lÆ°á»£ng khÃ¡, thiáº¿t káº¿ Ä‘áº¹p.', contractorInfo: { name: 'PhÃº ÄÃ´ng Group', rating: 4, pastProjects:['PhÃº ÄÃ´ng Premier'], feedbackSummary: 'Uy tÃ­n trong phÃ¢n khÃºc.'}},
            
            // ThÃªm dá»± Ã¡n á»Ÿ HÃ³c MÃ´n, BÃ¬nh ChÃ¡nh, Quáº­n 12
            { id: 45, name: 'Green Star Sky Garden (HÃ³c MÃ´n)', minPrice: 1100, maxPrice: 1400, downPaymentRate: 0.2, segment: 'affordable', developer: 'HÆ°ng Thá»‹nh Land', contractor: 'HÆ°ng Thá»‹nh Cons', contractorRating: 4, status: 'Äang má»Ÿ bÃ¡n', keyFeatures: 'Gáº§n Metro Line 1, tiá»‡n Ã­ch Ä‘áº§y Ä‘á»§.', contractorInfo: { name: 'HÆ°ng Thá»‹nh Cons', rating: 4, pastProjects: ['Q7 Boulevard'], feedbackSummary: 'Kinh nghiá»‡m tá»‘t, thi cÃ´ng nhanh.'}},
            { id: 46, name: 'Lovera Vista (BÃ¬nh ChÃ¡nh)', minPrice: 1300, maxPrice: 1600, downPaymentRate: 0.2, segment: 'affordable', developer: 'Khang Äiá»n', contractor: 'Khang Äiá»n (Tá»± xÃ¢y)', contractorRating: 4, status: 'ÄÃ£ bÃ n giao', keyFeatures: 'KÄT Lovera Park, há»‡ thá»‘ng trÆ°á»ng há»c tá»‘t.', contractorInfo: { name: 'Khang Äiá»n', rating: 4, pastProjects: ['Lovera Premier'], feedbackSummary: 'Uy tÃ­n, cháº¥t lÆ°á»£ng á»•n Ä‘á»‹nh.'}},
            { id: 47, name: 'Opal Cityview (Q12)', minPrice: 1500, maxPrice: 1800, downPaymentRate: 0.2, segment: 'affordable', developer: 'Dat Xanh Group', contractor: 'Ricons', contractorRating: 4, status: 'Äang bÃ n giao', keyFeatures: 'Gáº§n Quáº­n 1, káº¿t ná»‘i tá»‘t cÃ¡c quáº­n trung tÃ¢m.', contractorInfo: { name: 'Ricons', rating: 4, pastProjects: ['The Sun Avenue'], feedbackSummary: 'Cháº¥t lÆ°á»£ng tá»‘t, uy tÃ­n.'}},
            { id: 48, name: 'Westgate (BÃ¬nh ChÃ¡nh)', minPrice: 1200, maxPrice: 1500, downPaymentRate: 0.2, segment: 'affordable', developer: 'An Gia Investment', contractor: 'An Gia Construction', contractorRating: 4, status: 'Äang xÃ¢y dá»±ng', keyFeatures: 'Tiá»‡n Ã­ch Ä‘a dáº¡ng, gáº§n AEON Mall.', contractorInfo: { name: 'An Gia Construction', rating: 4, pastProjects: ['The Manor'], feedbackSummary: 'NhÃ  tháº§u chuyÃªn nghiá»‡p.'}},
            { id: 49, name: 'Vinhomes Smart City (HÃ³c MÃ´n)', minPrice: 1800, maxPrice: 2200, downPaymentRate: 0.2, segment: 'mid', developer: 'Vinhomes', contractor: 'Coteccons', contractorRating: 5, status: 'Sáº¯p má»Ÿ bÃ¡n', keyFeatures: 'Smart home, tiá»‡n Ã­ch 5 sao Vinhomes.', contractorInfo: { name: 'Coteccons', rating: 5, pastProjects: ['Vinhomes Grand Park'], feedbackSummary: 'Cháº¥t lÆ°á»£ng hÃ ng Ä‘áº§u.'}},
            { id: 50, name: 'Saigon Mystery Villas (Q12)', minPrice: 1600, maxPrice: 1900, downPaymentRate: 0.3, segment: 'affordable', developer: 'HÆ°ng Thá»‹nh Corp', contractor: 'HÆ°ng Thá»‹nh Incons', contractorRating: 4, status: 'Äang bÃ n giao', keyFeatures: 'Thiáº¿t káº¿ hiá»‡n Ä‘áº¡i, gáº§n BV Chá»£ Ráº«y 2.', contractorInfo: { name: 'HÆ°ng Thá»‹nh Incons', rating: 4, pastProjects: ['Q7 Saigon Riverside'], feedbackSummary: 'Thi cÃ´ng cháº¥t lÆ°á»£ng.'}},
            { id: 51, name: 'Mizuki Park (BÃ¬nh ChÃ¡nh)', minPrice: 2000, maxPrice: 2500, downPaymentRate: 0.3, segment: 'mid', developer: 'Nam Long & Hankyu', contractor: 'Coteccons', contractorRating: 5, status: 'ÄÃ£ bÃ n giao má»™t pháº§n', keyFeatures: 'KÄT kiá»ƒu Nháº­t, cÃ´ng viÃªn 12ha.', contractorInfo: { name: 'Coteccons', rating: 5, pastProjects: ['Akari City'], feedbackSummary: 'Cháº¥t lÆ°á»£ng cao, uy tÃ­n.'}},
            { id: 52, name: 'Dragon Riverside (HÃ³c MÃ´n)', minPrice: 1400, maxPrice: 1700, downPaymentRate: 0.2, segment: 'affordable', developer: 'PhÃ¡t Äáº¡t Corp', contractor: 'PhÃ¡t Äáº¡t Cons', contractorRating: 3, status: 'Äang xÃ¢y dá»±ng', keyFeatures: 'View sÃ´ng, giÃ¡ cáº¡nh tranh.', contractorInfo: { name: 'PhÃ¡t Äáº¡t Cons', rating: 3, pastProjects: ['Astral City'], feedbackSummary: 'Äang cáº£i thiá»‡n cháº¥t lÆ°á»£ng.'}},
            { id: 53, name: 'Jamila Khang Äiá»n (Q9)', minPrice: 2200, maxPrice: 2800, downPaymentRate: 0.3, segment: 'mid', developer: 'Khang Äiá»n', contractor: 'An Phong', contractorRating: 4, status: 'ÄÃ£ bÃ n giao', keyFeatures: 'Thiáº¿t káº¿ Malaysia, tiá»‡n Ã­ch resort.', contractorInfo: { name: 'An Phong', rating: 4, pastProjects: ['Safira Khang Äiá»n'], feedbackSummary: 'Cháº¥t lÆ°á»£ng á»•n Ä‘á»‹nh.'}},
            { id: 54, name: 'Terra Rosa (BÃ¬nh ChÃ¡nh)', minPrice: 1900, maxPrice: 2300, downPaymentRate: 0.2, segment: 'mid', developer: 'Khang Äiá»n', contractor: 'Khang Äiá»n (Tá»± xÃ¢y)', contractorRating: 4, status: 'Sáº¯p má»Ÿ bÃ¡n', keyFeatures: 'Phong cÃ¡ch Äá»‹a Trung Háº£i, gáº§n Metro.', contractorInfo: { name: 'Khang Äiá»n', rating: 4, pastProjects: ['Lovera Vista'], feedbackSummary: 'NhÃ  tháº§u uy tÃ­n lÃ¢u nÄƒm.'}},
            { id: 55, name: 'Park View City (Q12)', minPrice: 1700, maxPrice: 2100, downPaymentRate: 0.2, segment: 'mid', developer: 'HoÃ ng QuÃ¢n', contractor: 'HoÃ ng QuÃ¢n (Tá»± xÃ¢y)', contractorRating: 3, status: 'Äang bÃ n giao', keyFeatures: 'Gáº§n cÃ´ng viÃªn lá»›n, giÃ¡ há»£p lÃ½.', contractorInfo: { name: 'HoÃ ng QuÃ¢n', rating: 3, pastProjects: ['HQC Plaza'], feedbackSummary: 'ChuyÃªn NOXH vÃ  táº§m trung.'}},
            { id: 56, name: 'Sky Center (HÃ³c MÃ´n)', minPrice: 1600, maxPrice: 2000, downPaymentRate: 0.2, segment: 'affordable', developer: 'Äáº¥t Xanh Group', contractor: 'Ricons', contractorRating: 4, status: 'Äang xÃ¢y dá»±ng', keyFeatures: 'Trung tÃ¢m HÃ³c MÃ´n, káº¿t ná»‘i thuáº­n tiá»‡n.', contractorInfo: { name: 'Ricons', rating: 4, pastProjects: ['Opal Riverside'], feedbackSummary: 'Kinh nghiá»‡m tá»‘t vá»›i dá»± Ã¡n táº§m trung.'}},
            { id: 57, name: 'Green Valley (BÃ¬nh ChÃ¡nh)', minPrice: 1800, maxPrice: 2200, downPaymentRate: 0.3, segment: 'mid', developer: 'Novaland', contractor: 'Ricons', contractorRating: 4, status: 'Sáº¯p bÃ n giao', keyFeatures: 'Thiáº¿t káº¿ xanh, gáº§n trÆ°á»ng quá»‘c táº¿.', contractorInfo: { name: 'Ricons', rating: 4, pastProjects: ['Aqua City'], feedbackSummary: 'Cháº¥t lÆ°á»£ng á»•n Ä‘á»‹nh.'}},
            
            // Dá»± Ã¡n trung cáº¥p
            { id: 11, name: 'Happy One Central (BD)', minPrice: 1800, maxPrice: 2200, downPaymentRate: 0.2, segment: 'mid', developer: 'Váº¡n XuÃ¢n Group', contractor: 'Central Cons', contractorRating: 4, status: 'Äang xÃ¢y dá»±ng', keyFeatures: '68 tiá»‡n Ã­ch trÃªn khÃ´ng, cáº§u kÃ­nh.', contractorInfo: { name: 'Central Cons', rating: 4, pastProjects: ['Kingdom 101'], feedbackSummary: 'NhÃ  tháº§u tráº», nÄƒng Ä‘á»™ng.'}},
            { id: 12, name: 'Aqua Bay Residences (VÃ­ dá»¥)', minPrice: 2100, maxPrice: 2800, downPaymentRate: 0.2, segment: 'mid', developer: 'Novaland (VÃ­ dá»¥)', contractor: 'Ricons (VÃ­ dá»¥)', contractorRating: 4, status: 'Äang xÃ¢y dá»±ng', keyFeatures: 'View sÃ´ng, thiáº¿t káº¿ hiá»‡n Ä‘áº¡i.', contractorInfo: { name: 'Ricons', rating: 4, pastProjects:['Aqua City'], feedbackSummary: 'Kinh nghiá»‡m tá»‘t.'}},
            { id: 13, name: 'Sky Garden Apartments (VÃ­ dá»¥)', minPrice: 2500, maxPrice: 3500, downPaymentRate: 0.2, segment: 'mid', developer: 'HÆ°ng Thá»‹nh Corp (VÃ­ dá»¥)', contractor: 'HÆ°ng Thá»‹nh Incons', contractorRating: 4, status: 'Sáº¯p má»Ÿ bÃ¡n', keyFeatures: 'Gáº§n trá»¥c Ä‘Æ°á»ng lá»›n.', contractorInfo: { name: 'HÆ°ng Thá»‹nh Incons', rating: 4, pastProjects:['Q7 SG Riverside'], feedbackSummary: 'Thi cÃ´ng nhanh.'}},
            { id: 14, name: 'Akari City (BÃ¬nh TÃ¢n)', minPrice: 2800, maxPrice: 3400, downPaymentRate: 0.3, segment: 'mid', developer: 'Nam Long, Hankyu, NNR', contractor: 'Coteccons (GÄ1)', contractorRating: 5, status: 'GÄ 1 Ä‘Ã£ bÃ n giao, GÄ 2 Ä‘ang xÃ¢y', keyFeatures: 'KÄT kiá»ƒu Nháº­t, tiá»‡n Ã­ch Ä‘á»§ Ä‘áº§y.', contractorInfo: { name: 'Coteccons', rating: 5, pastProjects:['Landmark 81'], feedbackSummary: 'Top Ä‘áº§u VN.'}},
            { id: 15, name: 'Flora Panorama (Mizuki Park)', minPrice: 3000, maxPrice: 3800, downPaymentRate: 0.3, segment: 'mid', developer: 'Nam Long, Hankyu, NNR', contractor: 'Newtecons (VÃ­ dá»¥)', contractorRating: 4, status: 'Äang xÃ¢y', keyFeatures: 'View sÃ´ng, KÄT Mizuki tiá»‡n Ã­ch.', contractorInfo: { name: 'Newtecons', rating: 4, pastProjects:['Nhiá»u dá»± Ã¡n Masterise'], feedbackSummary: 'Cháº¥t lÆ°á»£ng cao.'}},
            { id: 16, name: 'Celesta Rise (NhÃ  BÃ¨)', minPrice: 3300, maxPrice: 4000, downPaymentRate: 0.3, segment: 'mid', developer: 'Keppel Land & PhÃº Long', contractor: 'HÃ²a BÃ¬nh Corp', contractorRating: 5, status: 'Äang xÃ¢y', keyFeatures: 'TiÃªu chuáº©n Singapore, nhiá»u máº£ng xanh.', contractorInfo: { name: 'HÃ²a BÃ¬nh Corp', rating: 5, pastProjects:['Celesta Heights'], feedbackSummary: 'Uy tÃ­n, cháº¥t lÆ°á»£ng.'}},
            { id: 17, name: 'The Privia (BÃ¬nh TÃ¢n)', minPrice: 2900, maxPrice: 3500, downPaymentRate: 0.3, segment: 'mid', developer: 'Khang Äiá»n', contractor: 'An Phong (VÃ­ dá»¥)', contractorRating: 4, status: 'Sáº¯p bÃ n giao', keyFeatures: 'Khang Äiá»n uy tÃ­n, phÃ¡p lÃ½ tá»‘t.', contractorInfo: { name: 'An Phong', rating: 4, pastProjects:['Nhiá»u dá»± Ã¡n lá»›n'], feedbackSummary: 'CÃ³ kinh nghiá»‡m.'}},
            { id: 18, name: 'Urban Green (Thá»§ Äá»©c)', minPrice: 3500, maxPrice: 4200, downPaymentRate: 0.3, segment: 'mid', developer: 'Kusto Home', contractor: 'Coteccons', contractorRating: 5, status: 'Äang xÃ¢y', keyFeatures: 'Thiáº¿t káº¿ xanh, gáº§n QL13.', contractorInfo: { name: 'Coteccons', rating: 5, pastProjects:['The MarQ'], feedbackSummary: 'Cháº¥t lÆ°á»£ng hÃ ng Ä‘áº§u.'}},
            { id: 19, name: 'King Crown Infinity (Thá»§ Äá»©c)', minPrice: 4000, maxPrice: 5000, downPaymentRate: 0.3, segment: 'mid', developer: 'BCG Land', contractor: 'Tracodi & CC1', contractorRating: 3, status: 'Äang xÃ¢y', keyFeatures: 'Vá»‹ trÃ­ VÃµ VÄƒn NgÃ¢n, thiáº¿t káº¿ Ä‘á»™c Ä‘Ã¡o.', contractorInfo: { name: 'Tracodi & CC1', rating: 3, pastProjects:['Amor Residence'], feedbackSummary: 'Äang ná»— lá»±c.'}},
            { id: 20, name: 'Precia (Thá»§ Äá»©c)', minPrice: 3400, maxPrice: 4000, downPaymentRate: 0.3, segment: 'mid', developer: 'Äiá»n PhÃºc ThÃ nh (Rio Land PT)', contractor: 'PhÆ°á»›c ThÃ nh', contractorRating: 3, status: 'ÄÃ£ bÃ n giao', keyFeatures: 'Gáº§n sÃ´ng, sá»‘ lÆ°á»£ng cÄƒn Ã­t.', contractorInfo: { name: 'PhÆ°á»›c ThÃ nh', rating: 3, pastProjects:['Centana TÄ'], feedbackSummary: 'CÃ³ kinh nghiá»‡m khu vá»±c.'}},
            
            // Dá»± Ã¡n cao cáº¥p
            { id: 21, name: 'Vinhomes Sapphire (Grand Park)', minPrice: 3200, maxPrice: 4200, downPaymentRate: 0.2, segment: 'high', developer: 'Vinhomes', contractor: 'Coteccons / HÃ²a BÃ¬nh', contractorRating: 5, status: 'ÄÃ£ bÃ n giao', keyFeatures: 'Äáº¡i Ä‘Ã´ thá»‹, gáº§n Metro.', contractorInfo: { name: 'Coteccons / HÃ²a BÃ¬nh', rating: 5, pastProjects: ['Landmark 81'], feedbackSummary: 'Top Ä‘áº§u Viá»‡t Nam.'}},
            { id: 22, name: 'Masteri Lumiere Riverside (TPTÄ)', minPrice: 4800, maxPrice: 6500, downPaymentRate: 0.3, segment: 'high', developer: 'Masterise Homes', contractor: 'Newtecons', contractorRating: 5, status: 'ÄÃ£ bÃ n giao', keyFeatures: 'Vá»‹ trÃ­ An PhÃº, ven sÃ´ng.', contractorInfo: { name: 'Newtecons', rating: 5, pastProjects:['Masteri Centre Point'], feedbackSummary: 'Cháº¥t lÆ°á»£ng cao cáº¥p.'}},
            { id: 23, name: 'The Opus One (Global City)', minPrice: 5500, maxPrice: 7000, downPaymentRate: 0.3, segment: 'high', developer: 'Masterise Homes', contractor: 'An Phong', contractorRating: 4, status: 'Äang xÃ¢y dá»±ng', keyFeatures: 'Trong KÄT The Global City.', contractorInfo: { name: 'An Phong', rating: 4, pastProjects:['Celesta Rise'], feedbackSummary: 'Kinh nghiá»‡m dá»± Ã¡n lá»›n.'}},
            { id: 24, name: 'Palm Heights (Palm City)', minPrice: 4000, maxPrice: 5500, downPaymentRate: 0.3, segment: 'high', developer: 'Keppel Land, Tiáº¿n PhÆ°á»›c, Tráº§n ThÃ¡i', contractor: 'HÃ²a BÃ¬nh Corp', contractorRating: 5, status: 'ÄÃ£ bÃ n giao', keyFeatures: 'KÄT Palm City, view sÃ´ng.', contractorInfo: { name: 'HÃ²a BÃ¬nh Corp', rating: 5, pastProjects:['Empire City'], feedbackSummary: 'Uy tÃ­n cao.'}},
            { id: 25, name: 'Define (Tháº¡nh Má»¹ Lá»£i)', minPrice: 5800, maxPrice: 7500, downPaymentRate: 0.3, segment: 'high', developer: 'CapitaLand', contractor: 'HÃ²a BÃ¬nh Corp (Dá»± kiáº¿n)', contractorRating: 5, status: 'Äang xÃ¢y', keyFeatures: 'Thiáº¿t káº¿ siÃªu sang, má»—i cÄƒn cÃ³ thang mÃ¡y riÃªng.', contractorInfo: { name: 'HÃ²a BÃ¬nh Corp', rating: 5, pastProjects:['The View Riviera Point'], feedbackSummary: 'Cháº¥t lÆ°á»£ng quá»‘c táº¿.'}},
            { id: 26, name: 'Zeit River Thá»§ ThiÃªm', minPrice: 7000, maxPrice: 9000, downPaymentRate: 0.3, segment: 'high', developer: 'GS E&C (HÃ n Quá»‘c)', contractor: 'GS E&C (Tá»± xÃ¢y)', contractorRating: 5, status: 'Äang xÃ¢y GÄ1', keyFeatures: 'KÄT Thá»§ ThiÃªm, tiÃªu chuáº©n HÃ n Quá»‘c.', contractorInfo: { name: 'GS E&C', rating: 5, pastProjects:['Xi Riverview Palace'], feedbackSummary: 'Cháº¥t lÆ°á»£ng xÃ¢y dá»±ng cao.'}},
            { id: 27, name: 'Metropole Thá»§ ThiÃªm (The Galleria)', minPrice: 6800, maxPrice: 8500, downPaymentRate: 0.3, segment: 'high', developer: 'SonKim Land & Quá»‘c Lá»™c PhÃ¡t', contractor: 'HÃ²a BÃ¬nh Corp', contractorRating: 5, status: 'ÄÃ£ bÃ n giao', keyFeatures: 'Äá»‘i diá»‡n NhÃ  hÃ¡t lá»›n Thá»§ ThiÃªm.', contractorInfo: { name: 'HÃ²a BÃ¬nh Corp', rating: 5, pastProjects:['The Crest Residence'], feedbackSummary: 'Äáº³ng cáº¥p.'}},
            { id: 28, name: 'D\'Edge Tháº£o Äiá»n', minPrice: 5500, maxPrice: 7000, downPaymentRate: 0.3, segment: 'high', developer: 'CapitaLand', contractor: 'Unicons (VÃ­ dá»¥)', contractorRating: 4, status: 'ÄÃ£ bÃ n giao', keyFeatures: 'Há»“ bÆ¡i vÃ´ cá»±c trÃªn khÃ´ng ná»‘i 2 thÃ¡p.', contractorInfo: { name: 'Unicons', rating: 4, pastProjects:['Nhiá»u dá»± Ã¡n CapitaLand'], feedbackSummary: 'ThÃ nh viÃªn Coteccons.'}},
            { id: 29, name: 'The River Thá»§ ThiÃªm', minPrice: 6500, maxPrice: 8000, downPaymentRate: 0.3, segment: 'high', developer: 'City Garden Thá»§ ThiÃªm (Refico & CII)', contractor: 'Cofico (VÃ­ dá»¥)', contractorRating: 4, status: 'ÄÃ£ bÃ n giao', keyFeatures: 'Máº·t tiá»n sÃ´ng SÃ i GÃ²n, thiáº¿t káº¿ bá»Ÿi DP Architects.', contractorInfo: { name: 'Cofico', rating: 4, pastProjects:['Vista Verde'], feedbackSummary: 'Kinh nghiá»‡m lÃ¢u nÄƒm.'}},
            { id: 30, name: 'Waterina Suites (Tháº¡nh Má»¹ Lá»£i)', minPrice: 5000, maxPrice: 6500, downPaymentRate: 0.3, segment: 'high', developer: 'Maeda (Nháº­t) & ThiÃªn Äá»©c', contractor: 'Maeda Vietnam', contractorRating: 5, status: 'ÄÃ£ bÃ n giao', keyFeatures: 'Thiáº¿t káº¿ lÆ°á»£n sÃ³ng bá»Ÿi Kengo Kuma.', contractorInfo: { name: 'Maeda Vietnam', rating: 5, pastProjects:['Dá»± Ã¡n háº¡ táº§ng lá»›n'], feedbackSummary: 'Cháº¥t lÆ°á»£ng Nháº­t Báº£n.'}},
            { 
                id: 41, name: 'Celadon City - Emerald (TÃ¢n PhÃº)', 
                minPrice: 3250, maxPrice: 3500, downPaymentRate: 0.3, segment: 'high', 
                developer: 'Gamuda Land', contractor: 'Gamuda Land (Tá»± xÃ¢y)', contractorRating: 4, 
                status: 'ÄÃ£ bÃ n giao (Æ¯á»›c tÃ­nh)', 
                keyFeatures: 'KÄT Celadon City, cÃ´ng viÃªn 16ha, nhiá»u tiá»‡n Ã­ch.', 
                contractorInfo: { name: 'Gamuda Land', rating: 4, pastProjects: ['ToÃ n KÄT Celadon City', 'Gamuda City (Hanoi)'], feedbackSummary: 'Kinh nghiá»‡m phÃ¡t triá»ƒn KÄT lá»›n, cháº¥t lÆ°á»£ng tá»‘t.'}
            },
            { 
                id: 42, name: 'Celadon City - Diamond Alnata (TÃ¢n PhÃº)', 
                minPrice: 4500, maxPrice: 4800, downPaymentRate: 0.3, segment: 'high', 
                developer: 'Gamuda Land', contractor: 'Gamuda Land (Tá»± xÃ¢y)', contractorRating: 4, 
                status: 'ÄÃ£ bÃ n giao (Æ¯á»›c tÃ­nh)', 
                keyFeatures: 'Thuá»™c Diamond Precinct, thiáº¿t káº¿ hiá»‡n Ä‘áº¡i, KÄT Celadon.', 
                contractorInfo: { name: 'Gamuda Land', rating: 4, pastProjects: ['ToÃ n KÄT Celadon City', 'Gamuda City (Hanoi)'], feedbackSummary: 'Kinh nghiá»‡m phÃ¡t triá»ƒn KÄT lá»›n, cháº¥t lÆ°á»£ng tá»‘t.'}
            },
            { 
                id: 43, name: 'Celadon City - Diamond Brilliant (TÃ¢n PhÃº)', 
                minPrice: 4500, maxPrice: 6500, downPaymentRate: 0.3, segment: 'high', 
                developer: 'Gamuda Land', contractor: 'Gamuda Land (Tá»± xÃ¢y)', contractorRating: 4, 
                status: 'ÄÃ£ bÃ n giao (Æ¯á»›c tÃ­nh)', 
                keyFeatures: 'PhÃ¢n khu biá»‡t láº­p, tiá»‡n Ã­ch riÃªng cao cáº¥p, KÄT Celadon.', 
                contractorInfo: { name: 'Gamuda Land', rating: 4, pastProjects: ['ToÃ n KÄT Celadon City', 'Gamuda City (Hanoi)'], feedbackSummary: 'Kinh nghiá»‡m phÃ¡t triá»ƒn KÄT lá»›n, cháº¥t lÆ°á»£ng tá»‘t.'}
            },
            
            // Dá»± Ã¡n luxury
            { id: 31, name: 'The Grand Manhattan (Q1)', minPrice: 8500, maxPrice: 15000, downPaymentRate: 0.3, segment: 'luxury', developer: 'Novaland', contractor: 'HÃ²a BÃ¬nh Corp', contractorRating: 5, status: 'Äang bÃ n giao', keyFeatures: 'Vá»‹ trÃ­ trung tÃ¢m Q1, khÃ¡ch sáº¡n Avani.', contractorInfo: { name: 'HÃ²a BÃ¬nh Corp', rating: 5, pastProjects:['Le Meridien Saigon'], feedbackSummary: 'Uy tÃ­n hÃ ng Ä‘áº§u.'}},
            { id: 32, name: 'The Crest Residence (Thá»§ ThiÃªm)', minPrice: 9000, maxPrice: 18000, downPaymentRate: 0.3, segment: 'luxury', developer: 'SonKim Land', contractor: 'HÃ²a BÃ¬nh Corp', contractorRating: 5, status: 'ÄÃ£ bÃ n giao', keyFeatures: 'Thuá»™c The Metropole, tiá»‡n Ã­ch 5 sao.', contractorInfo: { name: 'HÃ²a BÃ¬nh Corp', rating: 5, pastProjects:['The Galleria Residence'], feedbackSummary: 'Cháº¥t lÆ°á»£ng cao.'}},
            { id: 33, name: 'Diamond Alnata Plus (Vinhomes Grand Park - Fictional Luxury Line)', minPrice: 7000, maxPrice: 18000, downPaymentRate: 0.3, segment: 'luxury', developer: 'Vinhomes', contractor: 'Delta Group', contractorRating: 5, status: 'Sáº¯p má»Ÿ bÃ¡n', keyFeatures: 'DÃ²ng siÃªu sang cá»§a Vinhomes, tiá»‡n Ã­ch Ä‘áº·c quyá»n.', contractorInfo: { name: 'Delta Group', rating: 5, pastProjects:['Vinhomes Skylake'], feedbackSummary: 'NhÃ  tháº§u lá»›n, kinh nghiá»‡m.'}},
            { id: 34, name: 'Grand Marina Saigon (Q1)', minPrice: 15000, maxPrice: 30000, downPaymentRate: 0.5, segment: 'luxury', developer: 'Masterise Homes (JW Marriott)', contractor: 'Newtecons & Mace', contractorRating: 5, status: 'Äang bÃ n giao', keyFeatures: 'Branded residences, báº¿n du thuyá»n.', contractorInfo: { name: 'Newtecons & Mace', rating: 5, pastProjects:['CÃ¡c dá»± Ã¡n Masterise'], feedbackSummary: 'TiÃªu chuáº©n quá»‘c táº¿.'}},
            { id: 35, name: 'Serenity Sky Villas (Q3)', minPrice: 10000, maxPrice: 20000, downPaymentRate: 0.3, segment: 'luxury', developer: 'SonKim Land', contractor: 'HÃ²a BÃ¬nh Corp (VÃ­ dá»¥)', contractorRating: 5, status: 'ÄÃ£ bÃ n giao', keyFeatures: 'Biá»‡t thá»± trÃªn khÃ´ng, há»“ bÆ¡i riÃªng tá»«ng cÄƒn.', contractorInfo: { name: 'HÃ²a BÃ¬nh Corp', rating: 5, pastProjects:['Nassim Tháº£o Äiá»n'], feedbackSummary: 'Äáº³ng cáº¥p xÃ¢y dá»±ng.'}},
            { id: 36, name: 'The Albany (Tháº£o Äiá»n)', minPrice: 9500, maxPrice: 16000, downPaymentRate: 0.3, segment: 'luxury', developer: 'SonKim Land & Hamon Developments', contractor: 'HÃ²a BÃ¬nh Corp (VÃ­ dá»¥)', contractorRating: 5, status: 'ÄÃ£ bÃ n giao', keyFeatures: 'Chá»‰ 22 cÄƒn, siÃªu riÃªng tÆ°.', contractorInfo: { name: 'HÃ²a BÃ¬nh Corp', rating: 5, pastProjects:['Gateway Thao Dien'], feedbackSummary: 'Cháº¥t lÆ°á»£ng cao.'}},
            { id: 37, name: 'One Central Saigon (The Ritz-Carlton Residences)', minPrice: 20000, maxPrice: 50000, downPaymentRate: 0.5, segment: 'luxury', developer: 'Masterise Homes', contractor: 'Newtecons (ChÃ­nh)', contractorRating: 5, status: 'Äang xÃ¢y', keyFeatures: 'Äá»‘i diá»‡n chá»£ Báº¿n ThÃ nh, thÆ°Æ¡ng hiá»‡u Ritz-Carlton.', contractorInfo: { name: 'Newtecons', rating: 5, pastProjects:['Grand Marina'], feedbackSummary: 'Thi cÃ´ng dá»± Ã¡n siÃªu sang.'}},
            { id: 38, name: 'The Marq (Q1)', minPrice: 12000, maxPrice: 22000, downPaymentRate: 0.3, segment: 'luxury', developer: 'Hongkong Land & An Khang', contractor: 'Coteccons', contractorRating: 5, status: 'ÄÃ£ bÃ n giao', keyFeatures: 'Vá»‹ trÃ­ trung tÃ¢m, há»“ bÆ¡i vÃ´ cá»±c táº§ng thÆ°á»£ng.', contractorInfo: { name: 'Coteccons', rating: 5, pastProjects:['D\'Edge'], feedbackSummary: 'Biá»ƒu tÆ°á»£ng cháº¥t lÆ°á»£ng.'}},
            { id: 39, name: 'Zenity CapitaLand (Q1)', minPrice: 11000, maxPrice: 19000, downPaymentRate: 0.3, segment: 'luxury', developer: 'CapitaLand', contractor: 'HÃ²a BÃ¬nh (VÃ­ dá»¥)', contractorRating: 5, status: 'ÄÃ£ bÃ n giao (hoÃ n thiá»‡n tá»« D1 Mension)', keyFeatures: 'Sá»‘ lÆ°á»£ng giá»›i háº¡n, dá»‹ch vá»¥ concierge.', contractorInfo: { name: 'HÃ²a BÃ¬nh', rating: 5, pastProjects:['Define'], feedbackSummary: 'Kinh nghiá»‡m dá»± Ã¡n sang trá»ng.'}},
            { id: 40, name: 'Cover Residences (Empire City)', minPrice: 18000, maxPrice: 40000, downPaymentRate: 0.3, segment: 'luxury', developer: 'Keppel Land, Tiáº¿n PhÆ°á»›c, Gaw Capital', contractor: 'HÃ²a BÃ¬nh (VÃ­ dá»¥)', contractorRating: 5, status: 'ÄÃ£ bÃ n giao', keyFeatures: 'View sÃ´ng trá»±c diá»‡n, tiá»‡n Ã­ch riÃªng biá»‡t.', contractorInfo: { name: 'HÃ²a BÃ¬nh', rating: 5, pastProjects:['Linden Residences'], feedbackSummary: 'Cháº¥t lÆ°á»£ng KÄT Empire City.'}},
            { 
                id: 44, name: 'Celadon City - Diamond Centery (TÃ¢n PhÃº)', 
                minPrice: 5400, maxPrice: 9800, downPaymentRate: 0.3, segment: 'luxury',
                developer: 'Gamuda Land', contractor: 'Gamuda Land (Tá»± xÃ¢y)', contractorRating: 4, 
                status: 'ÄÃ£ bÃ n giao (Æ¯á»›c tÃ­nh)', 
                keyFeatures: 'CÄƒn há»™ diá»‡n tÃ­ch lá»›n, thiáº¿t káº¿ sang trá»ng, KÄT Celadon.', 
                contractorInfo: { name: 'Gamuda Land', rating: 4, pastProjects: ['ToÃ n KÄT Celadon City', 'Gamuda City (Hanoi)'], feedbackSummary: 'Kinh nghiá»‡m phÃ¡t triá»ƒn KÄT lá»›n, cháº¥t lÆ°á»£ng tá»‘t cho dÃ²ng cao cáº¥p.'}
            }
        ];

        let salaryGrowthChartInstance = null;
        let savingsGoalChartInstance = null;
        let selectedProjectForChart = null;

        // HÃ m tÃ­nh tá»· lá»‡ tÄƒng giÃ¡ theo phÃ¢n khÃºc vÃ  thá»i gian
        function calculateSegmentGrowthRate(segment, baseRate, year) {
            // Tá»· lá»‡ tÄƒng trÆ°á»Ÿng cÆ¡ báº£n theo phÃ¢n khÃºc
            const segmentMultipliers = {
                'affordable': 1.5,   // TÄƒng nhanh nháº¥t do khan hiáº¿m Ä‘áº¥t
                'mid': 1.2,          // TÄƒng á»•n Ä‘á»‹nh
                'high': 0.85,        // TÄƒng cháº­m hÆ¡n
                'luxury': 0.6        // TÄƒng cháº­m nháº¥t
            };
            
            // Yáº¿u tá»‘ giáº£m dáº§n theo thá»i gian (diminishing returns)
            const timeDecayFactor = Math.max(0.3, 1 - (year * 0.05)); // Giáº£m 5% má»—i nÄƒm, tá»‘i thiá»ƒu 30%
            
            // TÃ­nh tá»· lá»‡ cuá»‘i cÃ¹ng
            const finalRate = baseRate * segmentMultipliers[segment] * timeDecayFactor;
            
            return Math.max(0.01, finalRate / 100); // Tá»‘i thiá»ƒu 1%/nÄƒm
        }

        // HÃ m tÃ­nh giÃ¡ tÆ°Æ¡ng lai vá»›i logic thá»±c táº¿
        function calculateFuturePrice(currentPrice, segment, basePriceIncrease, years) {
            let futurePrice = currentPrice;
            
            for (let year = 1; year <= years; year++) {
                const yearlyRate = calculateSegmentGrowthRate(segment, basePriceIncrease, year);
                futurePrice *= (1 + yearlyRate);
            }
            
            return futurePrice;
        }

        // Cáº­p nháº­t hiá»ƒn thá»‹ tá»· lá»‡ tÄƒng trÆ°á»Ÿng theo phÃ¢n khÃºc
        function updateSegmentGrowthDisplay(basePriceIncrease) {
            const year1Rates = {
                affordable: calculateSegmentGrowthRate('affordable', basePriceIncrease, 1) * 100,
                mid: calculateSegmentGrowthRate('mid', basePriceIncrease, 1) * 100,
                high: calculateSegmentGrowthRate('high', basePriceIncrease, 1) * 100,
                luxury: calculateSegmentGrowthRate('luxury', basePriceIncrease, 1) * 100
            };

            document.getElementById('affordable-growth').textContent = year1Rates.affordable.toFixed(1);
            document.getElementById('mid-growth').textContent = year1Rates.mid.toFixed(1);
            document.getElementById('high-growth').textContent = year1Rates.high.toFixed(1);
            document.getElementById('luxury-growth').textContent = year1Rates.luxury.toFixed(1);
        }

        function formatNumber(num, isCurrency = false) {
            if (isNaN(num) || num === null) return "...";
            const formattedNum = parseFloat(num).toLocaleString('vi-VN', { minimumFractionDigits: 0, maximumFractionDigits: (num % 1 !== 0 && num < 10 && num > -10 && !isCurrency) ? 1 : (isCurrency && num < 10 && num % 1 !== 0 ? 1:0) });
            return isCurrency ? `${formattedNum} triá»‡u VNÄ` : formattedNum;
        }

        function displaySelectedProjectInfo(project) {
            const infoCard = document.getElementById('selectedProjectInfoCard');
            if (project && project.contractorInfo) {
                document.getElementById('selectedProjectName').textContent = project.name;
                document.getElementById('selectedProjectDeveloper').textContent = project.developer || 'N/A';
                document.getElementById('selectedProjectStatus').textContent = project.status || 'N/A';
                document.getElementById('selectedProjectFeatures').innerHTML = project.keyFeatures ? project.keyFeatures.replace(/\n/g, '<br>') : 'N/A';
                
                const contractor = project.contractorInfo;
                document.getElementById('selectedProjectContractorName').textContent = contractor.name || 'N/A';
                
                const ratingContainer = document.getElementById('selectedProjectContractorRating');
                ratingContainer.innerHTML = '';
                const rating = contractor.rating || 0;
                for (let i = 1; i <= 5; i++) {
                    const star = document.createElement('i');
                    star.classList.add(i <= rating ? 'fas' : 'far', 'fa-star');
                    ratingContainer.appendChild(star);
                }

                const pastProjectsList = document.getElementById('selectedProjectContractorPast');
                pastProjectsList.innerHTML = '';
                if (contractor.pastProjects && contractor.pastProjects.length > 0) {
                    const ul = document.createElement('ul');
                    contractor.pastProjects.forEach(pName => {
                        const li = document.createElement('li');
                        li.textContent = pName;
                        ul.appendChild(li);
                    });
                    pastProjectsList.appendChild(ul);
                } else {
                    pastProjectsList.innerHTML = '<div>ChÆ°a cÃ³ thÃ´ng tin.</div>';
                }
                document.getElementById('selectedProjectContractorFeedback').textContent = contractor.feedbackSummary || 'ChÆ°a cÃ³ nháº­n xÃ©t.';
                infoCard.style.display = 'block';
            } else {
                infoCard.style.display = 'none';
            }
        }
        
        function renderSalaryChart(yearsArray, salaryData, expensesData, monthlyNetCashSavingsData) { 
            const ctx = document.getElementById('salaryGrowthChart').getContext('2d');
            if (salaryGrowthChartInstance) {
                salaryGrowthChartInstance.destroy();
            }
            salaryGrowthChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: yearsArray,
                    datasets: [
                        {
                            label: 'LÆ°Æ¡ng thÃ¡ng (Triá»‡u VNÄ)',
                            data: salaryData,
                            borderColor: '#ff6b6b',
                            backgroundColor: 'rgba(255, 107, 107, 0.2)',
                            fill: true,
                            tension: 0.1
                        },
                        { 
                            label: 'Chi tiÃªu thÃ¡ng (Triá»‡u VNÄ)',
                            data: expensesData,
                            borderColor: '#fdcb6e', 
                            backgroundColor: 'rgba(253, 203, 110, 0.2)',
                            fill: true,
                            tension: 0.1
                        },
                        {
                            label: 'Tiáº¿t kiá»‡m rÃ²ng tiá»n máº·t thÃ¡ng (sau DCA)',
                            data: monthlyNetCashSavingsData,
                            borderColor: '#48dbfb',
                            backgroundColor: 'rgba(72, 219, 251, 0.2)',
                            fill: true,
                            tension: 0.1
                        }
                    ]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    scales: { y: { beginAtZero: true, ticks: { callback: value => formatNumber(value) } } },
                    plugins: { legend: { position: 'top' }, tooltip: { callbacks: { label: context => `${context.dataset.label}: ${formatNumber(context.raw, true)}` } } }
                }
            });
        }

        function renderSavingsGoalChart(yearsArray, cumulativeSavingsData, selectedProjFuturePrice, selectedProjDownPayment, basePriceIncrease) {
            const ctx = document.getElementById('savingsGoalChart').getContext('2d');
            if (savingsGoalChartInstance) {
                savingsGoalChartInstance.destroy();
            }

            const datasets = []; 

            datasets.push({
                label: 'Tá»•ng TÃ i Sáº£n TÃ­ch LÅ©y (Triá»‡u VNÄ)',
                data: cumulativeSavingsData,
                borderColor: '#00b894',
                backgroundColor: 'rgba(0, 184, 148, 0.2)',
                fill: true,
                tension: 0.1,
                order: 2 
            });

            const annotations = {};
            if (selectedProjectForChart) {
                if (typeof selectedProjFuturePrice === 'number' && typeof selectedProjDownPayment === 'number') {
                    annotations.line1 = {
                        type: 'line',
                        yMin: selectedProjFuturePrice,
                        yMax: selectedProjFuturePrice,
                        borderColor: 'rgb(255, 99, 132)',
                        borderWidth: 2,
                        borderDash: [6, 6],
                        label: {
                            content: `GiÃ¡ ${selectedProjectForChart.name.substring(0,15)}... (${formatNumber(selectedProjFuturePrice, true)})`,
                            display: true, 
                            position: 'end',
                            backgroundColor: 'rgba(255, 99, 132, 0.8)',
                            font: { weight: 'bold', size: 9 },
                            padding: { top: 3, bottom:3, left:5, right:5},
                            yAdjust: -5
                        }
                    };
                    annotations.line2 = {
                        type: 'line',
                        yMin: selectedProjDownPayment,
                        yMax: selectedProjDownPayment,
                        borderColor: 'rgb(75, 192, 192)',
                        borderWidth: 2,
                        borderDash: [6, 6],
                        label: {
                            content: `Tráº£ trÆ°á»›c ${selectedProjectForChart.name.substring(0,10)}... (${formatNumber(selectedProjDownPayment, true)})`,
                            display: true, 
                            position: 'start',
                            backgroundColor: 'rgba(75, 192, 192, 0.8)',
                            font: { weight: 'bold', size: 9 },
                            padding: { top: 3, bottom:3, left:5, right:5},
                            yAdjust: 5
                        }
                    };
                }

                const projectMinPriceLineData = [];
                const projectMaxPriceLineData = [];

                yearsArray.forEach(yearLabel => {
                    let yearForCalc = 0;
                    if (yearLabel === 'Hiá»‡n táº¡i') {
                        yearForCalc = 0;
                    } else if (yearLabel.startsWith('NÄƒm ')) {
                        const yearStr = yearLabel.replace('NÄƒm ', '');
                        yearForCalc = parseFloat(yearStr);
                        if (isNaN(yearForCalc)) yearForCalc = 0; 
                    }

                    const currentProjectMinPrice = calculateFuturePrice(selectedProjectForChart.minPrice, selectedProjectForChart.segment, basePriceIncrease, yearForCalc);
                    projectMinPriceLineData.push(currentProjectMinPrice);

                    const currentProjectMaxPrice = calculateFuturePrice(selectedProjectForChart.maxPrice, selectedProjectForChart.segment, basePriceIncrease, yearForCalc);
                    projectMaxPriceLineData.push(currentProjectMaxPrice);
                });

                datasets.push({
                    label: `GiÃ¡ Min ${selectedProjectForChart.name.substring(0,10)}...`,
                    data: projectMinPriceLineData,
                    borderColor: 'rgba(255, 159, 64, 0.7)', 
                    borderDash: [3, 3],
                    fill: false, 
                    tension: 0.1,
                    pointRadius: 0,
                    order: 0 
                });

                datasets.push({
                    label: `GiÃ¡ Max ${selectedProjectForChart.name.substring(0,10)}... (VÃ¹ng giÃ¡)`,
                    data: projectMaxPriceLineData,
                    borderColor: 'rgba(255, 159, 64, 0.7)', 
                    backgroundColor: 'rgba(255, 159, 64, 0.2)', 
                    borderDash: [3, 3],
                    fill: '-1', 
                    tension: 0.1,
                    pointRadius: 0,
                    order: 1 
                });
            }

            savingsGoalChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: yearsArray,
                    datasets: datasets
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    scales: { y: { beginAtZero: true, ticks: { callback: value => formatNumber(value) } } },
                    plugins: { 
                        legend: { position: 'top' }, 
                        tooltip: { 
                            callbacks: { 
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    let value = context.raw;
                                    let finalLabel = "";

                                    if (selectedProjectForChart && label.includes('GiÃ¡ Max') && label.includes('(VÃ¹ng giÃ¡)')) {
                                        const minDataset = savingsGoalChartInstance.data.datasets.find(ds => ds.label.startsWith('GiÃ¡ Min') && ds.label.includes(selectedProjectForChart.name.substring(0,10)));
                                        if (minDataset && context.dataIndex < minDataset.data.length) {
                                            const minValue = minDataset.data[context.dataIndex];
                                            finalLabel = `${selectedProjectForChart.name.substring(0,10)}...: ${formatNumber(minValue)} - ${formatNumber(value, true)}`;
                                        } else {
                                            finalLabel = `${label.replace(' (VÃ¹ng giÃ¡)','').replace('GiÃ¡ Max ','')}: ${formatNumber(value, true)}`;
                                        }
                                    } else if (selectedProjectForChart && label.startsWith('GiÃ¡ Min')) {
                                        const maxDatasetWithFill = savingsGoalChartInstance.data.datasets.find(ds => ds.label.startsWith('GiÃ¡ Max') && ds.label.includes('(VÃ¹ng giÃ¡)'));
                                        if (maxDatasetWithFill) return null; 
                                        else finalLabel = `${label.replace('GiÃ¡ Min ','')}: ${formatNumber(value, true)}`;
                                    }
                                    else {
                                        finalLabel = `${label}: ${formatNumber(value, true)}`;
                                    }
                                    return finalLabel;
                                }
                            }
                        },
                        annotation: { annotations: annotations }
                    }
                }
            });
        }

        function updateCalculations() {
            const salary = parseFloat(document.getElementById('salary').value) || 0;
            const expenses = parseFloat(document.getElementById('expenses').value) || 0;
            const bonus = parseFloat(document.getElementById('bonus').value) || 0;
            const currentCashSavingsInput = parseFloat(document.getElementById('current-savings').value) || 0;
            const initialInvestmentValue = parseFloat(document.getElementById('initial-investment').value) || 0;
            const dcaMonthlyAmount = parseFloat(document.getElementById('dca-amount').value) || 0;

            const targetYears = parseFloat(document.getElementById('target-years').value) || 0;
            const basePriceIncrease = 7; // Cá»‘ Ä‘á»‹nh 7%/nÄƒm pháº£n Ã¡nh thá»‹ trÆ°á»ng TP.HCM
            const salaryGrowthRate = (parseFloat(document.getElementById('salary-growth').value) || 0) / 100;
            const expensesGrowthRate = (parseFloat(document.getElementById('expenses-growth').value) || 0) / 100;
            const investmentGrowthRate = (parseFloat(document.getElementById('investment-growth').value) || 0) / 100;

            // Cáº­p nháº­t hiá»ƒn thá»‹ tá»· lá»‡ tÄƒng trÆ°á»Ÿng theo phÃ¢n khÃºc
            updateSegmentGrowthDisplay(basePriceIncrease);

            let targetYearsDisplay = targetYears;
            if (targetYears === 0.5) targetYearsDisplay = "6 thÃ¡ng";
            else if (targetYears === 1.5) targetYearsDisplay = "1.5 nÄƒm";
            else if (targetYears % 1 === 0) targetYearsDisplay = `${targetYears} nÄƒm`;
            else targetYearsDisplay = `${targetYears.toFixed(1)} nÄƒm`;

            document.getElementById('years-display').textContent = targetYearsDisplay;
            document.getElementById('years-display-2').textContent = targetYearsDisplay;
            document.getElementById('years-display-3').textContent = targetYearsDisplay;

            const initialMonthlyGrossSavings = salary - expenses;
            const initialMonthlyNetCashSavings = initialMonthlyGrossSavings - dcaMonthlyAmount;
            
            document.getElementById('monthly-net-savings').textContent = formatNumber(initialMonthlyNetCashSavings, true);

            const savingsRateBeforeDCA = salary > 0 ? (initialMonthlyGrossSavings / salary * 100).toFixed(1) : 0;
            document.getElementById('savings-rate').textContent = `${savingsRateBeforeDCA}%`;
            
            const salaryChartYears = ['Hiá»‡n táº¡i'];
            const salaryChartData = [salary];
            const expensesChartData = [expenses]; 
            const monthlyNetCashSavingsChartData = [initialMonthlyNetCashSavings];
            
            let cumulativeCashSavings = currentCashSavingsInput;
            let currentInvestmentPortfolioValue = initialInvestmentValue;
            let totalCumulativeAssets = cumulativeCashSavings + currentInvestmentPortfolioValue;

            const savingsGoalChartYears = ['Hiá»‡n táº¡i'];
            const savingsGoalData = [totalCumulativeAssets];
            
            const timelineDisplayData = [{
                yearLabel: 'Hiá»‡n táº¡i',
                amount: totalCumulativeAssets,
                cash: cumulativeCashSavings,
                investments: currentInvestmentPortfolioValue,
                salary: salary,
                expenses: expenses,
                savingBeforeDCA: initialMonthlyGrossSavings,
                netCashSaving: initialMonthlyNetCashSavings
            }];

            if (targetYears > 0) {
                let monthlyEffectiveTarget = Math.round(targetYears * 12);
                for (let month = 1; month <= monthlyEffectiveTarget; month++) {
                    let yearIndexForGrowth = Math.floor((month - 1) / 12);
                    let currentMonthlySalary = salary * Math.pow(1 + salaryGrowthRate, yearIndexForGrowth);
                    let currentMonthlyExpenses = expenses * Math.pow(1 + expensesGrowthRate, yearIndexForGrowth);
                    let currentMonthlyGrossSavings = currentMonthlySalary - currentMonthlyExpenses;
                    let currentMonthlyNetCashSavings = currentMonthlyGrossSavings - dcaMonthlyAmount;

                    cumulativeCashSavings += currentMonthlyNetCashSavings;
                    
                    let currentAnnualBonus = bonus * Math.pow(1 + salaryGrowthRate, yearIndexForGrowth);
                    cumulativeCashSavings += (currentAnnualBonus / 12);

                    currentInvestmentPortfolioValue += dcaMonthlyAmount;
                    currentInvestmentPortfolioValue *= (1 + investmentGrowthRate / 12);

                    totalCumulativeAssets = cumulativeCashSavings + currentInvestmentPortfolioValue;

                    if (month % 12 === 0 || month === monthlyEffectiveTarget) {
                        let yearLabel;
                        if (month === monthlyEffectiveTarget && targetYears % 1 !== 0) {
                             yearLabel = targetYears % 1 === 0.5 ? `NÄƒm ${Math.floor(targetYears)}.5` : `NÄƒm ${targetYears.toFixed(1)}`;
                        } else {
                            yearLabel = `NÄƒm ${month/12}`;
                        }
                        
                        if (!savingsGoalChartYears.includes(yearLabel) || month === monthlyEffectiveTarget) {
                            if (month === monthlyEffectiveTarget && savingsGoalChartYears[savingsGoalChartYears.length-1].startsWith("NÄƒm " + Math.floor(targetYears)) && targetYears % 1 !== 0) {
                                savingsGoalChartYears[savingsGoalChartYears.length -1] = yearLabel;
                                savingsGoalData[savingsGoalData.length -1] = totalCumulativeAssets;
                                salaryChartYears[salaryChartYears.length -1] = yearLabel;
                                salaryChartData[salaryChartData.length -1] = currentMonthlySalary;
                                expensesChartData[expensesChartData.length -1] = currentMonthlyExpenses; 
                                monthlyNetCashSavingsChartData[monthlyNetCashSavingsChartData.length -1] = currentMonthlyNetCashSavings;
                            } else if (!savingsGoalChartYears.includes(yearLabel)){
                                savingsGoalChartYears.push(yearLabel);
                                savingsGoalData.push(totalCumulativeAssets);
                                salaryChartYears.push(yearLabel);
                                salaryChartData.push(currentMonthlySalary);
                                expensesChartData.push(currentMonthlyExpenses); 
                                monthlyNetCashSavingsChartData.push(currentMonthlyNetCashSavings);
                            }
                        }
                         if(!timelineDisplayData.find(item => item.yearLabel === yearLabel) || month === monthlyEffectiveTarget) {
                            timelineDisplayData.push({
                                yearLabel: yearLabel,
                                amount: totalCumulativeAssets,
                                cash: cumulativeCashSavings,
                                investments: currentInvestmentPortfolioValue,
                                salary: currentMonthlySalary,
                                expenses: currentMonthlyExpenses, 
                                savingBeforeDCA: currentMonthlyGrossSavings,
                                netCashSaving: currentMonthlyNetCashSavings
                            });
                        }
                    }
                }
            }
            
            if (targetYears > 0 && targetYears % 1 !== 0) {
                 const finalYearLabel = targetYears % 1 === 0.5 ? `NÄƒm ${Math.floor(targetYears)}.5` : `NÄƒm ${targetYears.toFixed(1)}`;
                if (savingsGoalChartYears[savingsGoalChartYears.length -1] !== finalYearLabel) { 
                    savingsGoalChartYears.push(finalYearLabel);
                    savingsGoalData.push(totalCumulativeAssets);
                    
                    let lastYearIndexForGrowth = Math.floor((Math.round(targetYears * 12) -1) / 12);
                    let lastCurrentMonthlySalary = salary * Math.pow(1 + salaryGrowthRate, lastYearIndexForGrowth);
                    let lastCurrentMonthlyExpenses = expenses * Math.pow(1 + expensesGrowthRate, lastYearIndexForGrowth); 
                    let lastCurrentMonthlyGrossSavings = lastCurrentMonthlySalary - lastCurrentMonthlyExpenses;
                    let lastCurrentMonthlyNetCashSavings = lastCurrentMonthlyGrossSavings - dcaMonthlyAmount;

                    salaryChartYears.push(finalYearLabel);
                    salaryChartData.push(lastCurrentMonthlySalary);
                    expensesChartData.push(lastCurrentMonthlyExpenses); 
                    monthlyNetCashSavingsChartData.push(lastCurrentMonthlyNetCashSavings);
                }
            }

            document.getElementById('total-savings').textContent = formatNumber(totalCumulativeAssets, true);
            document.getElementById('final-investment-value').textContent = formatNumber(currentInvestmentPortfolioValue, true);

            const houseBudget = totalCumulativeAssets > 0 ? totalCumulativeAssets / 0.3 : 0; 
            const loanAmount = Math.max(0, houseBudget - totalCumulativeAssets);
            document.getElementById('loan-amount').textContent = formatNumber(loanAmount, true);
            document.getElementById('house-budget').textContent = formatNumber(houseBudget, true);

            // Sá»­ dá»¥ng logic tÄƒng giÃ¡ thá»±c táº¿ cho cÄƒn há»™ 1.5 tá»·
            const hypotheticalHousePriceNow = 1500;
            const futureHypotheticalPrice = calculateFuturePrice(hypotheticalHousePriceNow, 'mid', basePriceIncrease, targetYears);
            document.getElementById('future-house-price').textContent = formatNumber(futureHypotheticalPrice, true);

            updateTimeline(targetYears, timelineDisplayData);
            updateHouseAffordability(totalCumulativeAssets, houseBudget, targetYears, basePriceIncrease);
            
            let selectedProjFuturePriceVal = null;
            let selectedProjDownPaymentVal = null;
            if (selectedProjectForChart) {
                const avgPriceNow = (selectedProjectForChart.minPrice + selectedProjectForChart.maxPrice) / 2;
                selectedProjFuturePriceVal = calculateFuturePrice(avgPriceNow, selectedProjectForChart.segment, basePriceIncrease, targetYears);
                selectedProjDownPaymentVal = selectedProjFuturePriceVal * selectedProjectForChart.downPaymentRate;
            }

            renderSalaryChart(salaryChartYears, salaryChartData, expensesChartData, monthlyNetCashSavingsChartData); 
            renderSavingsGoalChart(savingsGoalChartYears, savingsGoalData, selectedProjFuturePriceVal, selectedProjDownPaymentVal, basePriceIncrease);
            
            let tipTargetYears = targetYears;
            if (targetYears === 0.5) tipTargetYears = "6 thÃ¡ng"; else if (targetYears === 1.5) tipTargetYears = "1.5 nÄƒm"; else tipTargetYears = `${targetYears % 1 === 0 ? targetYears : targetYears.toFixed(1)} nÄƒm`;
            
            const dcaImpactText = dcaMonthlyAmount > 0 ? ` Viá»‡c Ä‘áº§u tÆ° DCA ${formatNumber(dcaMonthlyAmount, true)}/thÃ¡ng vá»›i tÄƒng trÆ°á»Ÿng ${formatNumber(investmentGrowthRate*100, false)}%/nÄƒm giÃºp báº¡n cÃ³ thÃªm khoáº£ng ${formatNumber(currentInvestmentPortfolioValue - (initialInvestmentValue + dcaMonthlyAmount * targetYears * 12) , true)} so vá»›i chá»‰ gá»­i tiáº¿t kiá»‡m.` : "";

            document.getElementById('quick-tip').innerHTML = `ğŸ’¡ <strong>Máº¹o nhanh:</strong> Vá»›i má»¥c tiÃªu ${tipTargetYears}, báº¡n cÃ³ thá»ƒ tÃ­ch lÅ©y Ä‘Æ°á»£c khoáº£ng ${formatNumber(totalCumulativeAssets, true)} (bao gá»“m cáº£ Ä‘áº§u tÆ°).${dcaImpactText} Äá»ƒ tÄƒng tá»‘c, hÃ£y xem xÃ©t tÄƒng thu nháº­p, giáº£m chi tiÃªu, hoáº·c tÃ¬m cÃ¡ch tá»‘i Æ°u tá»· suáº¥t lá»£i nhuáº­n Ä‘áº§u tÆ°. Má»—i 1% tÄƒng trÆ°á»Ÿng lÆ°Æ¡ng hÃ ng nÄƒm sáº½ giÃºp báº¡n cÃ³ thÃªm khoáº£ng ${formatNumber( (salary * 0.01 * 12 * targetYears) + (salary*0.01 * 12 * targetYears * (targetYears-1)/2 * salaryGrowthRate) , true)} sau ${tipTargetYears}.`;
        }

        function updateTimeline(targetYears, timelinePointsArray) {
            const timelineGrid = document.getElementById('timeline-grid');
            timelineGrid.innerHTML = '';
            
            if (timelinePointsArray.length > 0) {
                const uniqueTimelinePoints = [];
                const seenLabels = new Set();
                
                let sortedPoints = [...timelinePointsArray];
                const currentIndex = sortedPoints.findIndex(p => p.yearLabel === "Hiá»‡n táº¡i");
                if (currentIndex > 0) {
                    const currentPoint = sortedPoints.splice(currentIndex, 1)[0];
                    sortedPoints.unshift(currentPoint);
                }

                sortedPoints.forEach(data => {
                    if (!seenLabels.has(data.yearLabel)) {
                        uniqueTimelinePoints.push(data);
                        seenLabels.add(data.yearLabel);
                    } else if (data.yearLabel.includes('.')) {
                        const existingIndex = uniqueTimelinePoints.findIndex(p => p.yearLabel === data.yearLabel);
                        if(existingIndex !== -1) uniqueTimelinePoints[existingIndex] = data;
                        else uniqueTimelinePoints.push(data);
                    }
                });

                uniqueTimelinePoints.forEach(data => {
                    const itemDiv = document.createElement('div');
                    itemDiv.classList.add('timeline-item');
                    itemDiv.innerHTML = `
                        <div class="timeline-year">${data.yearLabel}</div>
                        <div class="timeline-amount" title="Tiá»n máº·t: ${formatNumber(data.cash, true)}\nÄáº§u tÆ°: ${formatNumber(data.investments, true)}">${formatNumber(data.amount, true)}</div>
                        <div class="timeline-desc">
                            LÆ°Æ¡ng: ${formatNumber(data.salary, true)}<br>
                            Chi tiÃªu: ${formatNumber(data.expenses, true)}<br>
                            TK (trÆ°á»›c DCA): ${formatNumber(data.savingBeforeDCA, true)}<br>
                            TK rÃ²ng (sau DCA): ${formatNumber(data.netCashSaving, true)}
                        </div>
                    `;
                    timelineGrid.appendChild(itemDiv);
                });
            }
        }

        function updateHouseAffordability(currentTotalAssets, totalBudget, targetYears, basePriceIncrease) {
            let affordableCount = 0;
            let recommendationText = "Vá»›i tÃ¬nh hÃ¬nh hiá»‡n táº¡i, báº¡n nÃªn táº­p trung tÃ­ch lÅ©y thÃªm.";
            let firstAffordableProjectDownPayment = Infinity;
            let progressPercent = 0;
            let progressText = "ChÆ°a cÃ³ dá»± Ã¡n nÃ o trong táº§m tay.";

            PROJECTS_DATA.forEach(project => {
                const card = document.getElementById(`houseCard${project.id}`);
                const statusBadge = document.getElementById(`status${project.id}`);
                if (!card || !statusBadge) {
                    console.warn(`Card or status badge not found for project ID ${project.id}`);
                    return; 
                }

                // Sá»­ dá»¥ng logic tÄƒng giÃ¡ thá»±c táº¿
                const avgPriceNow = (project.minPrice + project.maxPrice) / 2;
                const futurePrice = calculateFuturePrice(avgPriceNow, project.segment, basePriceIncrease, targetYears);
                const downPaymentNeeded = futurePrice * project.downPaymentRate;

                // Cáº­p nháº­t hiá»ƒn thá»‹ giÃ¡ dá»± kiáº¿n tÆ°Æ¡ng lai
                const priceProjectionDiv = card.querySelector('.price-projection') || document.createElement('div');
                if (!card.querySelector('.price-projection')) {
                    priceProjectionDiv.className = 'price-projection';
                    card.appendChild(priceProjectionDiv);
                }
                
                const currentAvgPrice = (project.minPrice + project.maxPrice) / 2;
                const increasePercent = ((futurePrice - currentAvgPrice) / currentAvgPrice * 100).toFixed(1);
                priceProjectionDiv.innerHTML = `Dá»± kiáº¿n sau ${targetYears === 0.5 ? '6 thÃ¡ng' : targetYears === 1.5 ? '1.5 nÄƒm' : targetYears + ' nÄƒm'}: ${formatNumber(futurePrice, true)} (+${increasePercent}%)`;

                let statusClass = '';
                let statusText = '';

                if (currentTotalAssets >= downPaymentNeeded && totalBudget >= futurePrice) {
                    statusText = "âœ… Kháº£ Thi";
                    statusClass = 'status-green';
                    affordableCount++;
                     if (downPaymentNeeded < firstAffordableProjectDownPayment && downPaymentNeeded > 0) {
                        firstAffordableProjectDownPayment = downPaymentNeeded;
                    } else if (downPaymentNeeded === 0 && firstAffordableProjectDownPayment === Infinity) {
                        firstAffordableProjectDownPayment = 0;
                    }
                } else if (currentTotalAssets >= downPaymentNeeded * 0.7 && totalBudget >= futurePrice * 0.8) {
                    statusText = "ğŸ¤ Cáº§n Cá»‘ Gáº¯ng";
                    statusClass = 'status-orange';
                } else {
                    statusText = "â›” ChÆ°a PhÃ¹ Há»£p";
                    statusClass = 'status-red';
                }
                
                statusBadge.style.opacity = 1;
                if (project.segment === 'luxury') { 
                    if (currentTotalAssets >= downPaymentNeeded && totalBudget >= futurePrice) {
                         statusText = "ğŸ’ Luxury Kháº£ Thi!";
                         statusClass = 'status-luxury-custom';
                    } else if (currentTotalAssets >= downPaymentNeeded * 0.5 && totalBudget >= futurePrice * 0.6) {
                        statusText = "ğŸ’ Luxury (Cáº§n ThÃªm)";
                        statusClass = 'status-luxury-custom';
                        statusBadge.style.opacity = 0.7;
                    } else {
                        statusText = "ğŸ’ Luxury (Xa)";
                        statusClass = 'status-luxury-custom';
                        statusBadge.style.opacity = 0.4;
                    }
                }

                statusBadge.textContent = statusText;
                statusBadge.className = `status-badge ${statusClass}`;
                if (project.segment === 'luxury' && !statusBadge.classList.contains('status-luxury-custom')) {
                    statusBadge.classList.add('status-luxury-custom');
                }

                card.classList.remove('affordable', 'stretch', 'future', 'house-luxury');
                if (project.segment === 'luxury') {
                     card.classList.add('house-luxury');
                 }

                if (currentTotalAssets >= downPaymentNeeded && totalBudget >= futurePrice ) { 
                    card.classList.add('affordable');
                } else if (currentTotalAssets >= downPaymentNeeded * 0.7 && totalBudget >= futurePrice * 0.8) {
                    card.classList.add('stretch');
                } else {
                    card.classList.add('future');
                }
            });

            document.getElementById('affordable-count').textContent = `${affordableCount} / ${PROJECTS_DATA.length}`;

            if (affordableCount > 0) {
                recommendationText = `Tuyá»‡t vá»i! Báº¡n cÃ³ thá»ƒ cÃ¢n nháº¯c ${affordableCount} dá»± Ã¡n. HÃ£y xem xÃ©t cÃ¡c dá»± Ã¡n cÃ³ Ä‘Ã¡nh dáº¥u "Kháº£ Thi".`;
                 if (firstAffordableProjectDownPayment !== Infinity && firstAffordableProjectDownPayment > 0) {
                    progressPercent = Math.min((currentTotalAssets / firstAffordableProjectDownPayment) * 100, 100);
                    progressText = `Äáº¡t ${progressPercent.toFixed(0)}% má»¥c tiÃªu tráº£ trÆ°á»›c cho dá»± Ã¡n kháº£ thi Ä‘áº§u tiÃªn.`;
                } else if (firstAffordableProjectDownPayment === 0 && currentTotalAssets >=0){
                    progressPercent = 100;
                    progressText = `ÄÃ£ Ä‘á»§ tiá»n tráº£ trÆ°á»›c cho dá»± Ã¡n kháº£ thi Ä‘áº§u tiÃªn!`;
                } else if (firstAffordableProjectDownPayment === Infinity && affordableCount > 0){
                     progressPercent = 100;
                     progressText = `ÄÃ£ Ä‘á»§ tiá»n tráº£ trÆ°á»›c cho cÃ¡c dá»± Ã¡n kháº£ thi!`;
                }
            } else if (PROJECTS_DATA.some(p => {
                const futurePrice = calculateFuturePrice(((p.minPrice + p.maxPrice) / 2), p.segment, basePriceIncrease, targetYears);
                return currentTotalAssets >= (futurePrice * p.downPaymentRate * 0.7) && totalBudget >= futurePrice * 0.8;
            })) {
                recommendationText = "Báº¡n Ä‘ang tiáº¿n gáº§n má»¥c tiÃªu! Má»™t vÃ i dá»± Ã¡n " + '"Cáº§n Cá»‘ Gáº¯ng"' + " cÃ³ thá»ƒ sá»›m náº±m trong táº§m tay.";
                let closestStretchDownPayment = Infinity;
                PROJECTS_DATA.filter(p_stretch => {
                     const futurePrice_s = calculateFuturePrice(((p_stretch.minPrice + p_stretch.maxPrice) / 2), p_stretch.segment, basePriceIncrease, targetYears);
                     return currentTotalAssets >= (futurePrice_s * p_stretch.downPaymentRate * 0.7) && totalBudget >= futurePrice_s * 0.8 && 
                            !(currentTotalAssets >= futurePrice_s * p_stretch.downPaymentRate && totalBudget >= futurePrice_s);
                }).forEach(p_stretch_detail => {
                    const dp_s = calculateFuturePrice(((p_stretch_detail.minPrice + p_stretch_detail.maxPrice) / 2), p_stretch_detail.segment, basePriceIncrease, targetYears) * p_stretch_detail.downPaymentRate;
                    if (dp_s < closestStretchDownPayment && dp_s > 0) closestStretchDownPayment = dp_s;
                    else if (dp_s === 0 && closestStretchDownPayment === Infinity) closestStretchDownPayment = 0;
                });

                if(closestStretchDownPayment !== Infinity && closestStretchDownPayment > 0) {
                    progressPercent = Math.min((currentTotalAssets / closestStretchDownPayment) * 100, 100);
                    progressText = `Äáº¡t ${progressPercent.toFixed(0)}% má»¥c tiÃªu tráº£ trÆ°á»›c cho dá»± Ã¡n "Cáº§n cá»‘ gáº¯ng" gáº§n nháº¥t.`;
                } else if (closestStretchDownPayment === 0){
                     progressPercent = 100;
                     progressText = `ÄÃ£ Ä‘á»§ tiá»n tráº£ trÆ°á»›c cho dá»± Ã¡n "Cáº§n cá»‘ gáº¯ng" gáº§n nháº¥t!`;
                }
            }
            document.getElementById('recommendation').innerHTML = recommendationText;
            document.getElementById('progress-bar').style.width = `${progressPercent}%`;
            document.getElementById('progress-text').textContent = progressText;
        }
        
        function generateHouseCardsDynamically() {
            const houseOptionsContainer = document.querySelector('.house-options');
            if (!houseOptionsContainer) {
                console.error("CRITICAL: houseOptionsContainer not found!");
                return;
            }

            const existingCards = houseOptionsContainer.querySelectorAll('.house-card');
            existingCards.forEach(card => card.remove());

            const headers = {
                affordable: houseOptionsContainer.querySelector('.affordable-category'),
                mid: houseOptionsContainer.querySelector('.mid-category'),
                high: houseOptionsContainer.querySelector('.high-category'),
                luxury: houseOptionsContainer.querySelector('.luxury-category')
            };

            const cardsBySegment = { affordable: [], mid: [], high: [], luxury: [] };

            PROJECTS_DATA.forEach(project => {
                const card = document.createElement('div');
                card.classList.add('house-card');
                card.classList.add(`house-${project.segment}`);
                
                card.id = `houseCard${project.id}`;
                card.dataset.projectId = project.id;

                let badgeClass = 'status-badge ';
                if (project.segment === 'luxury') badgeClass += 'status-luxury-custom';
                else badgeClass += 'status-red';

                card.innerHTML = `
                    <div class="house-title">ğŸ¢ ${project.name}</div>
                    <div class="house-price">${formatNumber(project.minPrice, false)} - ${formatNumber(project.maxPrice, false)} triá»‡u VNÄ</div>
                    <div class="house-details">
                        ${project.keyFeatures ? project.keyFeatures.split('\n').map(line => line.trim() + '<br>').join('') : 'ThÃ´ng tin Ä‘ang cáº­p nháº­t...<br>'}
                        â€¢ Vá»‘n cáº§n tráº£ trÆ°á»›c: ${project.downPaymentRate * 100}%
                    </div>
                    <div class="${badgeClass}" id="status${project.id}">Äang tÃ­nh...</div>
                `;
                
                card.addEventListener('click', function() {
                    const projId = parseInt(this.dataset.projectId);
                    const proj = PROJECTS_DATA.find(p => p.id === projId);
                    document.querySelectorAll('.house-card').forEach(c => c.classList.remove('selected-for-chart'));
                    if (selectedProjectForChart && selectedProjectForChart.id === projId) {
                        selectedProjectForChart = null;
                        displaySelectedProjectInfo(null);
                    } else {
                        selectedProjectForChart = proj;
                        this.classList.add('selected-for-chart');
                        displaySelectedProjectInfo(proj);
                    }
                    updateCalculations();
                });

                if (project.segment && cardsBySegment[project.segment]) {
                    cardsBySegment[project.segment].push(card);
                } else {
                    console.warn(`Unknown segment "${project.segment}" for project "${project.name}" or cardsBySegment issue.`);
                }
            });
            
            Object.keys(cardsBySegment).forEach(segment => {
                const header = headers[segment];
                const cards = cardsBySegment[segment];
                
                if (header && cards.length > 0) {
                    let currentElementToInsertAfter = header;
                    cards.forEach(cardNode => {
                        currentElementToInsertAfter.insertAdjacentElement('afterend', cardNode);
                        currentElementToInsertAfter = cardNode;
                    });
                } else {
                     if(!header) console.warn(`Header for segment ${segment} not found.`);
                }
            });
        }

        function filterHouses(segment) {
            const allCards = document.querySelectorAll('.house-options .house-card'); 
            const allHeaders = document.querySelectorAll('.house-options .category-header');
            const filterButtons = document.querySelectorAll('.filter-btn');

            filterButtons.forEach(btn => btn.classList.remove('active'));
            const activeButton = document.querySelector(`.filter-btn[onclick="filterHouses('${segment}')"]`);
            if (activeButton) activeButton.classList.add('active');

            if (segment === 'all') {
                allCards.forEach(card => card.style.display = 'block');
                allHeaders.forEach(header => header.style.display = 'flex'); 
            } else {
                allCards.forEach(card => {
                    if (card.classList.contains(`house-${segment}`)) {
                        card.style.display = 'block';
                    } else {
                        card.style.display = 'none';
                    }
                });
                allHeaders.forEach(header => header.style.display = 'none');
                const activeHeader = document.querySelector(`.house-options .category-header.${segment}-category`);
                if (activeHeader) {
                    activeHeader.style.display = 'flex';
                }
            }
        }

        function toggleGuide() {
            const guideContent = document.getElementById('guideContent');
            const toggleButton = document.querySelector('.guide-toggle');
            
            if (guideContent.classList.contains('active')) {
                guideContent.classList.remove('active');
                toggleButton.innerHTML = 'ğŸ“š HÆ°á»›ng Dáº«n Sá»­ Dá»¥ng Chi Tiáº¿t';
            } else {
                guideContent.classList.add('active');
                toggleButton.innerHTML = 'âŒ áº¨n HÆ°á»›ng Dáº«n';
                // Scroll to guide section
                guideContent.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
        }

        document.querySelectorAll('.input-group input, .input-group select').forEach(input => {
            input.addEventListener('input', updateCalculations);
            if (input.tagName === 'SELECT') input.addEventListener('change', updateCalculations);
        });
        
        if (typeof ChartAnnotation !== 'undefined') {
             Chart.register(ChartAnnotation);
        } else {
            console.error("Chart.js Annotation Plugin not loaded!");
        }

        generateHouseCardsDynamically(); 
        displaySelectedProjectInfo(null); 
        updateCalculations(); 
        filterHouses('all');
    </script>
</body>
</html>